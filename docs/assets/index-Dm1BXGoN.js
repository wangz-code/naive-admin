import{d as e,o as a,p as t,g as l,a6 as o,c as n,w as s,b as r,e as u,a as i,r as p,H as d,q as c,h as m,B as h,v as f,_ as g,L as v}from"./index-igetQ514.js";import{i as _,t as w,_ as b,d as j,S as y,C as k,b as x,g as S,c as C,a as U,e as M,f as R,A as z,h as P,T as V}from"./numberUtils-B1sdvYMr.js";import{_ as D}from"./Space-Bm2dH6xY.js";import{R as L}from"./Refresh-862P2g-S.js";import{u as T}from"./use-message-D_gUYCBg.js";import{r as A}from"./utils-Des3bf1i.js";import{N as E}from"./Input-BaiNfrn6.js";import{N as F,a as I}from"./FormItem-8GC8-7jk.js";import{_ as N,b as B}from"./Grid-DQvEHrGX.js";import{_ as G}from"./DatePicker-I6d51wPe.js";import{_ as H}from"./Select-D_JyGJGf.js";import{_ as q}from"./Dropdown-XviYS72R.js";import{_ as K}from"./DataTable-BrdDMVaf.js";import"./get-slot-BjAOOWF7.js";import"./isNil-aV-w2MPu.js";import"./use-locale-DU65S_mc.js";import"./use-merged-state-DBHnG9yW.js";import"./next-frame-once-DiJwGkuW.js";import"./FocusDetector-44jhgDWi.js";import"./Popover-DBcoWgxD.js";import"./use-compitable-Dydh10IY.js";import"./Forward-S95Hqz2E.js";import"./create-Bylz8BGN.js";import"./Tag-C7IOvWmi.js";import"./index-CZ3Fyu1n.js";import"./Checkmark-CR2Vl_GF.js";import"./Empty-BLvPbj0r.js";import"./Checkbox-C-VptM1-.js";import"./RadioGroup-B5UoDU3A.js";import"./Tooltip-DXV-JLhh.js";import"./Pagination-DuNHC1De.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Q=[l("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M12 15l8.385-8.415a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3z"}),l("path",{d:"M16 5l3 3"}),l("path",{d:"M9 7.07A7.002 7.002 0 0 0 10 21a7.002 7.002 0 0 0 6.929-5.999"})],-1)],W=e({name:"EditCircle",render:function(e,l){return a(),t("svg",O,Q)}}),X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Y=[o('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 5H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5.697"></path><path d="M18 12V7a2 2 0 0 0-2-2h-2"></path><rect x="8" y="3" width="6" height="4" rx="2"></rect><path d="M8 11h4"></path><path d="M8 15h3"></path><circle cx="16.5" cy="17.5" r="2.5"></circle><path d="M18.5 19.5L21 22"></path></g>',1)],Z=e({name:"ReportSearch",render:function(e,l){return a(),t("svg",X,Y)}}),$=e=>[{type:"selection"},..._([["billdate","单据日期"],["name","姓名"],["phone","联系电话"],["address","地址"],["state","单据状态"],["sales","销售金额","right",w("sales")],["payment","收款金额","right",w("payment")],["action","操作","center",e.action]])],J=e({__name:"action",setup(e){const t=()=>{};return(e,l)=>{const o=b,i=D;return a(),n(i,{justify:"center"},{default:s((()=>[r(o,{title:"查看",onClick:t,icon:u(Z)},null,8,["icon"]),r(o,{title:"编辑",icon:u(W)},null,8,["icon"])])),_:1})}}}),ee=e({__name:"index",setup(e){const l=T(),o=i(null),_=i(!0),w=i({user:{name:"",age:""},where:"",phone:"",select:"",saleValue:"",stateValue:"",dateRange:[Date.now(),Date.now()]});i();const O=[{label:"批量发起",key:"submit",icon:A(M)},{label:"批量审核",key:"audit",icon:A(R)},{label:"批量驳回",key:"reject",icon:A(z)},{label:"批量反审",key:"reAudit",icon:A(P)},{label:"批量删除",key:"delete",icon:A(V)}],Q=["","全部收款","部分收款","未收款"].map((e=>({label:e||"全部",value:e}))),W=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e}))),X=e=>{l.success(e)},Y=e=>{var a;e.preventDefault(),null==(a=o.value)||a.validate((e=>{e?(console.log(e),l.error("Invalid")):Z()}))},Z=()=>{return e=this,a=null,t=function*(){try{te.isLoading=!0;const{data:e}=yield S();"success"==e.status&&(te.source=e.data)}catch(e){}finally{te.isLoading=!1}},new Promise(((l,o)=>{var n=e=>{try{r(t.next(e))}catch(a){o(a)}},s=e=>{try{r(t.throw(e))}catch(a){o(a)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,s);r((t=t.apply(e,a)).next())}));var e,a,t},ee={action:e=>f(J,{})},ae=p({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,100],prefix:({itemCount:e})=>`${e}条记录`,onChange:e=>{ae.page=e},onUpdatePageSize:e=>{ae.pageSize=e,ae.page=1}}),te=p({source:[],isLoading:!1,summary:e=>({name:{value:f("span",{style:{color:"red"}},e.reduce(((e,a)=>e),0)),colSpan:3}})});return Z(),(e,l)=>{const i=E,p=F,f=N,S=G,M=H,R=B,z=b,P=q,V=D,T=g,A=C,Z=U,J=I,le=K,oe=v;return a(),n(oe,null,{default:s((()=>[r(J,{ref_key:"formRef",ref:o,"label-placement":"left","label-width":"auto",model:u(w)},{default:s((()=>[r(R,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:s((()=>[r(f,null,{default:s((()=>[r(p,{label:"模糊查询",path:"where","show-feedback":!1},{default:s((()=>[r(i,{value:u(w).where,"onUpdate:value":l[0]||(l[0]=e=>u(w).where=e),placeholder:"输入关键字"},null,8,["value"])])),_:1})])),_:1}),r(f,null,{default:s((()=>[r(p,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:s((()=>[r(i,{value:u(w).user.name,"onUpdate:value":l[1]||(l[1]=e=>u(w).user.name=e),placeholder:"输入姓名"},null,8,["value"])])),_:1})])),_:1}),r(f,{span:2},{default:s((()=>[r(p,{label:"单据日期","show-feedback":!1,path:"phone"},{default:s((()=>[r(S,{value:u(w).dateRange,"onUpdate:value":l[2]||(l[2]=e=>u(w).dateRange=e),type:"daterange",clearable:""},null,8,["value"])])),_:1})])),_:1}),r(f,null,{default:s((()=>[r(p,{label:"收款状态","show-feedback":!1,path:"phone"},{default:s((()=>[r(M,{value:u(w).saleValue,"onUpdate:value":l[3]||(l[3]=e=>u(w).saleValue=e),placeholder:"Select",options:u(Q)},null,8,["value","options"])])),_:1})])),_:1}),r(f,null,{default:s((()=>[r(p,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:s((()=>[r(M,{value:u(w).stateValue,"onUpdate:value":l[4]||(l[4]=e=>u(w).stateValue=e),placeholder:"Select",options:u(W)},null,8,["value","options"])])),_:1})])),_:1}),u(_)?(a(),t(d,{key:0},[r(f,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(w).phone,"onUpdate:value":l[5]||(l[5]=e=>u(w).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),r(f,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(w).phone,"onUpdate:value":l[6]||(l[6]=e=>u(w).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),r(f,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(w).phone,"onUpdate:value":l[7]||(l[7]=e=>u(w).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1})],64)):c("",!0)])),_:1}),r(Z,{class:"m-t-sm m-b-sm",justify:"space-between"},{default:s((()=>[r(V,null,{default:s((()=>[r(z,{type:"primary",icon:u(j)},{default:s((()=>l[9]||(l[9]=[m("新增")]))),_:1},8,["icon"]),r(u(h),{strong:"",secondary:""},{default:s((()=>l[10]||(l[10]=[m("下载模板")]))),_:1}),r(u(h),{strong:"",secondary:""},{default:s((()=>l[11]||(l[11]=[m("批量导入")]))),_:1}),r(u(h),{strong:"",secondary:""},{default:s((()=>l[12]||(l[12]=[m("导出Excel")]))),_:1}),r(u(h),{strong:"",secondary:""},{default:s((()=>l[13]||(l[13]=[m("打印")]))),_:1}),r(P,{trigger:"hover",options:O,onSelect:X},{default:s((()=>[r(u(h),null,{default:s((()=>l[14]||(l[14]=[m("更多...")]))),_:1})])),_:1})])),_:1}),r(V,null,{default:s((()=>[r(A,null,{default:s((()=>[r(z,{"attr-type":"button",title:"查询",onClick:Y,type:"info",icon:u(y)},null,8,["icon"]),r(z,{"attr-type":"reset",title:"重置",icon:u(L)},null,8,["icon"]),r(u(h),{"attr-type":"button",onClick:l[8]||(l[8]=e=>_.value=!u(_))},{icon:s((()=>[r(T,{component:u(_)?u(k):u(x),size:16},null,8,["component"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),r(le,{columns:u($)(ee),data:u(te).source,pagination:u(ae),loading:u(te).isLoading},null,8,["columns","data","pagination","loading"])])),_:1})}}});export{ee as default};
