import{s as e,a,b as l,t,u as o,_ as s,g as r,C as n,c as u,d as i,S as p,e as d,A as m,f,T as c}from"./numberUtils-DcXHYQdq.js";import{a2 as h,v as b,d as y,a as v,o as _,c as k,w as j,b as g,e as w,f as U,h as x,B as z,L as C}from"./index-Chs2zBSz.js";import{u as R}from"./use-message-nk9B6bPn.js";import{r as N}from"./utils-wksm6enO.js";import{N as D}from"./Input-WszlKgJZ.js";import{N as V,a as F}from"./FormItem-QBYQL-Fi.js";import{_ as P,a as S}from"./Grid-2NVCXofE.js";import{_ as T}from"./DatePicker-BWQWmNjD.js";import{_ as A}from"./Select-PpJO20Ti.js";import{_ as E}from"./Dropdown-C7m97LUJ.js";import{_ as G}from"./Space-DLK8xmBf.js";import"./plugin-vueexport-helper-BCo6x5W8.js";import"./Divider-CJa-gdel.js";import"./Popover-C0WQOPIR.js";import"./use-merged-state-DgUqyJ-M.js";import"./use-compitable-CijOoW3l.js";import"./next-frame-once-DiJwGkuW.js";import"./get-slot-BjAOOWF7.js";import"./Checkbox-CGwzVkVm.js";import"./Tag-CbvsiTlD.js";import"./DataTable-nKdrE-q9.js";import"./RadioGroup-BQyS6C0n.js";import"./FocusDetector-BQsHHNIh.js";import"./create-Bylz8BGN.js";import"./Tooltip-CzVS-RkW.js";import"./Empty-c21jRl7S.js";import"./use-locale-DtpbCaq2.js";import"./Pagination-C1ebzq_f.js";import"./Forward-8fDi1KW7.js";import"./isNil-aV-w2MPu.js";import"./index-D7XDsJLk.js";import"./Checkmark-DtW3g9QY.js";const I=o=>{const s=[];for(let e=0;e<50;e++)s.push({title:"单据日期"+e,key:"billdate"+e,width:100});return[{type:"selection",fixed:"left"},{title:"单据日期",key:"billdate",sorter:e("billdate"),width:100},{title:"姓名",key:"name",sorter:a("name"),width:100},{title:"联系电话",key:"phone",ellipsis:{tooltip:!0},width:120},{title:"销售金额",key:"sales",width:150,align:"right",sorter:l("sales"),render:t("sales")},{title:"收款金额",width:100,key:"payment",align:"right",sorter:l("payment"),render:t("payment")},{title:"地址",key:"address",width:160},{title:"单据状态",key:"state",width:100},...s,{title:"操作",key:"action",fixed:"right",align:"center",width:80,render:o}]},$=(e,a)=>b("span",{},function(e,a=2){const l=new h(e);return l.isNaN()?"0.00":l.toFormat(a)}(e.reduce(((e,l)=>e+Number(l[a])),0))),q=e=>((e,a)=>{const l={};for(const t of a)l[t]={value:$(e,t)};return l})(e,["sales","payment"]),K=y({__name:"index",setup(e){const a=R(),l=v(null),{tableRef:t,reload:h}=o(),y={fuzzy:"",filter:{name:"",state:null,saleValue:null,where:"",phone:"",select:"",stateValue:"",dateRange:null}},$=()=>b(z,{size:"small",onClick:()=>{a.info("action")}},(()=>"操作")),K=[{label:"批量发起",key:"submit",icon:N(p)},{label:"批量审核",key:"audit",icon:N(d)},{label:"批量驳回",key:"reject",icon:N(m)},{label:"批量反审",key:"reAudit",icon:N(f)},{label:"批量删除",key:"delete",icon:N(c)}],L=[["0","全部收款"],["1","部分收款"],["9","未收款"]].map((e=>({label:e[1],value:e[0]}))),Q=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e})));return(e,a)=>{const o=D,p=u,d=V,m=P,f=T,c=A,b=S,v=F,R=i,N=E,B=G,H=C;return _(),k(H,null,{default:j((()=>[g(w(s),{ref_key:"tableRef",ref:t,columns:w(I)($),summary:w(q),api:w(r),rowkey:"key",params:y},{form:j((({collapsed:a,reload:t,qParams:s})=>[g(v,{ref_key:"formRef",ref:l,"label-placement":"left","label-width":"auto",model:s},{default:j((()=>[g(b,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",collapsed:a,"collapsed-rows":1,responsive:"screen"},{default:j((()=>[g(p,{label:e.$t("common.likeQuery"),path:"fuzzy","show-feedback":!1},{default:j((()=>[g(o,{value:s.fuzzy,"onUpdate:value":e=>s.fuzzy=e,placeholder:e.$t("common.input"),clearable:"",onKeyup:U(t,["enter"]),onClear:t},null,8,["value","onUpdate:value","placeholder","onKeyup","onClear"])])),_:2},1032,["label"]),g(m,null,{default:j((()=>[g(d,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:j((()=>[g(o,{value:s.filter.name,"onUpdate:value":e=>s.filter.name=e,placeholder:"输入姓名"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),g(m,{span:2},{default:j((()=>[g(d,{label:"单据日期","show-feedback":!1,path:"phone"},{default:j((()=>[g(f,{value:s.filter.dateRange,"onUpdate:value":e=>s.filter.dateRange=e,type:"daterange",clearable:""},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),g(m,null,{default:j((()=>[g(d,{label:"收款状态","show-feedback":!1,path:"phone"},{default:j((()=>[g(c,{value:s.filter.saleValue,"onUpdate:value":e=>s.filter.saleValue=e,clearable:"",options:w(L)},null,8,["value","onUpdate:value","options"])])),_:2},1024)])),_:2},1024),g(m,null,{default:j((()=>[g(d,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:j((()=>[g(c,{value:s.filter.stateValue,"onUpdate:value":e=>s.filter.stateValue=e,placeholder:"Select",options:w(Q)},null,8,["value","onUpdate:value","options"])])),_:2},1024)])),_:2},1024),g(m,null,{default:j((()=>[g(d,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[g(o,{value:s.filter.phone,"onUpdate:value":e=>s.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),g(m,null,{default:j((()=>[g(d,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[g(o,{value:s.filter.phone,"onUpdate:value":e=>s.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),g(m,null,{default:j((()=>[g(d,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[g(o,{value:s.filter.phone,"onUpdate:value":e=>s.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["collapsed"])])),_:2},1032,["model"])])),"bar-left":j((()=>[g(B,null,{default:j((()=>[g(R,{type:"primary",icon:w(n),onClick:w(h)},{default:j((()=>a[0]||(a[0]=[x("新增")]))),_:1},8,["icon","onClick"]),g(w(z),{strong:"",secondary:""},{default:j((()=>a[1]||(a[1]=[x("下载模板")]))),_:1}),g(w(z),{strong:"",secondary:""},{default:j((()=>a[2]||(a[2]=[x("批量导入")]))),_:1}),g(w(z),{strong:"",secondary:""},{default:j((()=>a[3]||(a[3]=[x("导出Excel")]))),_:1}),g(w(z),{strong:"",secondary:""},{default:j((()=>a[4]||(a[4]=[x("打印")]))),_:1}),g(N,{trigger:"hover",options:K},{default:j((()=>[g(w(z),null,{default:j((()=>a[5]||(a[5]=[x("更多...")]))),_:1})])),_:1})])),_:1})])),_:1},8,["columns","summary","api"])])),_:1})}}});export{K as default};
