import{R as e,ai as t,a9 as s,aC as a,a7 as i,ae as o}from"./celerisComponents-CqXnuMA9.js";import{_ as l}from"./CurrentPermissionMode.vuevuetypescriptsetuptruelang-Be4ZASS7.js";import{e as n,f as r,a as d,u}from"./index-CQkDbsIj.js";import{_ as p}from"./Authority.vuevuetypescriptsetuptruelang-CQH169NC.js";import{d as c,c as m,N as f,a2 as y,u as g,ae as _,R as x,Q as T,f as v,a6 as h,S as k,a7 as b,q as B,F as C}from"./vue-B5H4WroO.js";const P=c({__name:"ButtonPermission",setup(c){const{hasPermission:P,isBackendPermissionMode:R}=n(),M=r(),j=d(),{t:A}=u(),S=m((()=>j.getRoleList.includes(e.ADMIN))),w=m((()=>j.getRoleList.includes(e.USER)));function I(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;j.setToken(t),yield j.getUserInfoAction(),yield M.changePermissionCode()},new Promise(((e,i)=>{var o=e=>{try{n(a.next(e))}catch(t){i(t)}},l=e=>{try{n(a.throw(e))}catch(t){i(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,l);n((a=a.apply(t,s)).next())}));var t,s,a}return(n,r)=>{const d=t,u=s,c=a,m=i,j=o,N=_("auth");return x(),f(d,{title:g(A)("page.permission.pageTitles.button")},{default:y((()=>[T(l),T(d,{class:"my-4",title:g(A)("page.permission.currentCode"),embedded:"",bordered:!1},{default:y((()=>[v(h(g(M).getPermissionCodes),1)])),_:1},8,["title"]),T(u),T(c,{class:"mt-4",type:"info",title:g(A)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),T(u),T(d,{class:"mt-4",title:g(A)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:y((()=>[T(j,null,{default:y((()=>[T(m,{type:g(S)?"primary":"default",disabled:!g(R),onClick:r[0]||(r[0]=t=>I(g(e).ADMIN))},{default:y((()=>[v(h(g(e).ADMIN),1)])),_:1},8,["type","disabled"]),T(m,{type:g(w)?"primary":"default",disabled:!g(R),onClick:r[1]||(r[1]=t=>I(g(e).USER))},{default:y((()=>[v(h(g(e).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),g(R)?(x(),k(C,{key:0},[T(u,null,{default:y((()=>[v(h(g(A)("page.permission.componentWayTitle")),1)])),_:1}),T(p,{value:"1000"},{default:y((()=>[T(m,{type:"primary",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),T(p,{value:"2000"},{default:y((()=>[T(m,{type:"success",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),T(p,{value:["1000","2000"]},{default:y((()=>[T(m,{type:"error",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),T(u,null,{default:y((()=>[v(h(g(A)("page.permission.functionWayTitle")),1)])),_:1}),g(P)("1000")?(x(),f(m,{key:0,type:"primary",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):b("",!0),g(P)("2000")?(x(),f(m,{key:1,type:"success",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):b("",!0),g(P)(["1000","2000"])?(x(),f(m,{key:2,type:"error",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):b("",!0),T(u,null,{default:y((()=>[v(h(g(A)("page.permission.directiveWayTitle")),1)])),_:1}),B((x(),f(m,{type:"primary",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[N,"1000"]]),B((x(),f(m,{type:"success",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[N,"2000"]]),B((x(),f(m,{type:"error",class:"mx-4"},{default:y((()=>[v(h(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[N,["1000","2000"]]])],64)):b("",!0)])),_:1},8,["title"])}}});export{P as default};
