import{R as e,ai as t,a8 as s,aJ as a,a6 as i,ae as o}from"./celerisComponents-wzvf23oQ.js";import{d as l,c as n,N as r,a2 as d,u,ad as p,R as c,Q as m,f,a6 as y,S as g,a7 as _,q as x,F as T}from"./vue-DfkJQHDQ.js";import{_ as v}from"./CurrentPermissionMode.vuevuetypescriptsetuptruelang-C2WTAzTW.js";import{e as h,f as k,a as b,u as B}from"./index-DJhmYswW.js";import{_ as P}from"./Authority.vuevuetypescriptsetuptruelang-Bm3EdawG.js";const C=l({__name:"ButtonPermission",setup(l){const{hasPermission:C,isBackendPermissionMode:R}=h(),M=k(),j=b(),{t:A}=B(),I=n((()=>j.getRoleList.includes(e.ADMIN))),S=n((()=>j.getRoleList.includes(e.USER)));function w(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;j.setToken(t),yield j.getUserInfoAction(),yield M.changePermissionCode()},new Promise(((e,i)=>{var o=e=>{try{n(a.next(e))}catch(t){i(t)}},l=e=>{try{n(a.throw(e))}catch(t){i(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,l);n((a=a.apply(t,s)).next())}));var t,s,a}return(l,n)=>{const h=t,k=s,b=a,B=i,j=o,N=p("auth");return c(),r(h,{title:u(A)("page.permission.pageTitles.button")},{default:d((()=>[m(v),m(h,{class:"my-4",title:u(A)("page.permission.currentCode"),embedded:"",bordered:!1},{default:d((()=>[f(y(u(M).getPermissionCodes),1)])),_:1},8,["title"]),m(k),m(b,{class:"mt-4",type:"info",title:u(A)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),m(k),m(h,{class:"mt-4",title:u(A)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:d((()=>[m(j,null,{default:d((()=>[m(B,{type:u(I)?"primary":"default",disabled:!u(R),onClick:n[0]||(n[0]=t=>w(u(e).ADMIN))},{default:d((()=>[f(y(u(e).ADMIN),1)])),_:1},8,["type","disabled"]),m(B,{type:u(S)?"primary":"default",disabled:!u(R),onClick:n[1]||(n[1]=t=>w(u(e).USER))},{default:d((()=>[f(y(u(e).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),u(R)?(c(),g(T,{key:0},[m(k,null,{default:d((()=>[f(y(u(A)("page.permission.componentWayTitle")),1)])),_:1}),m(P,{value:"1000"},{default:d((()=>[m(B,{type:"primary",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),m(P,{value:"2000"},{default:d((()=>[m(B,{type:"success",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),m(P,{value:["1000","2000"]},{default:d((()=>[m(B,{type:"error",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),m(k,null,{default:d((()=>[f(y(u(A)("page.permission.functionWayTitle")),1)])),_:1}),u(C)("1000")?(c(),r(B,{key:0,type:"primary",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):_("",!0),u(C)("2000")?(c(),r(B,{key:1,type:"success",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):_("",!0),u(C)(["1000","2000"])?(c(),r(B,{key:2,type:"error",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):_("",!0),m(k,null,{default:d((()=>[f(y(u(A)("page.permission.directiveWayTitle")),1)])),_:1}),x((c(),r(B,{type:"primary",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[N,"1000"]]),x((c(),r(B,{type:"success",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[N,"2000"]]),x((c(),r(B,{type:"error",class:"mx-4"},{default:d((()=>[f(y(u(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[N,["1000","2000"]]])],64)):_("",!0)])),_:1},8,["title"])}}});export{C as default};
