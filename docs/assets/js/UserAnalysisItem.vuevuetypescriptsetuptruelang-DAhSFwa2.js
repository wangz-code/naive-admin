var t=Object.defineProperty,a=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,e,r)=>e in a?t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r,l=(t,l)=>{for(var s in l||(l={}))e.call(l,s)&&o(t,s,l[s]);if(a)for(var s of a(l))r.call(l,s)&&o(t,s,l[s]);return t};import{aL as s,ad as n,aG as i,aK as u,aO as c,aP as p}from"./celerisComponents-DoMVLPED.js";import{d,t as h,r as y,c as m,R as v,N as f,a2 as b,U as g,y as w,Q as j,u as x,S as C,a8 as _,a5 as O}from"./vue-On1Nx3Ly.js";import{_ as S}from"./DataCard.vuevuetypescriptsetuptruelang-BRhPbaX1.js";import $ from"./CardInnerIcon-DjMab9Nm.js";import{H as I}from"./echarts-CWPfSvAZ.js";import{r as N}from"./mockResp--Sh2X2ou.js";import"./index-CWVfZa1M.js";import{u as P}from"./useLoading-C5WqFM5y.js";import{u as k}from"./useChartOption-v--hvNJn.js";const T={class:"card-wrap flex flex-col justify-between h-full"},z={class:"header flex w-full py-$n-padding-top px-$n-padding-left"},L={class:"icon"},A={class:"info ml-4"},D={key:0,class:"value"},q={key:1},E={class:"ml-auto"},F=i(d({__name:"DataInsightCard",props:{title:{},chartType:{},chartHeight:{default:80},currency:{},hoverable:{type:Boolean,default:!0},dataCount:{}},setup(t){const a=t,{title:e,chartHeight:r,currency:o,dataCount:l}=h(a),i=y(),u=m((()=>{const t=null==l?void 0:l.value;return t?(null==o?void 0:o.value)?new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(t):new Intl.NumberFormat("zh-CN").format(t):""}));return(t,a)=>{const o=s,l=n;return v(),f(l,{"content-style":"padding:0",hoverable:t.hoverable,class:"container-type inline-size"},{default:b((()=>[g("div",T,[g("div",z,[g("div",L,[w(t.$slots,"icon")]),g("div",A,[j(o,{label:x(e),"tabular-nums":""},{default:b((()=>[t.$slots.default?(v(),C("div",D,[w(t.$slots,"default")])):(v(),C("div",q,_(x(u)),1))])),_:3},8,["label"])]),g("div",E,[w(t.$slots,"meta")])]),g("div",{ref_key:"chart",ref:i,class:"chart-wrapper overflow-hidden",style:O({height:`${x(r)}px`})},[w(t.$slots,"chart")],4)])])),_:3},8,["hoverable"])}}}));i(S);const G=d({__name:"UserAnalysisItem",props:{title:{type:String,default:""},quota:{type:String,default:""},chartType:{type:String,default:""},icon:{type:Object,default:""}},setup(t){const a=t,{loading:e,setLoading:r}=P(!0),o=y(),s=y(100),n=y([]),i=u(),{chartOption:d}=k((()=>({grid:{left:5,right:5,top:0,bottom:15},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis",formatter(t){const[a]=t,e=()=>{var t;return"line"===a.componentSubType?a.data:null==(t=a.data)?void 0:t.value};return p(a)||(o.value=e()),`<div>\n            <p class="tooltip-title">${e()}</p>\n          </div>`}},series:[l({data:n.value},"bar"===a.chartType?{type:"bar",barWidth:10,barGap:"0"}:{type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:i.value.primaryColor}})]})));return function(t){return e=this,l=null,u=function*(){try{const{data:t}=yield N["user-analysis-data"],{chartData:e}=t;o.value=t.count,s.value=t.growth,e.data.value.forEach(((t,e)=>{"bar"===a.chartType?n.value.push({value:t,itemStyle:{color:e%2?i.value.primaryColor:i.value.warningColor}}):n.value.push(t)}))}catch(t){}finally{r(!1)}},new Promise(((t,a)=>{var r=t=>{try{s(u.next(t))}catch(e){a(e)}},o=t=>{try{s(u.throw(t))}catch(e){a(e)}},s=a=>a.done?t(a.value):Promise.resolve(a.value).then(r,o);s((u=u.apply(e,l)).next())}));var e,l,u}(a.quota),(a,r)=>{const l=c;return v(),f(l,{show:x(e),class:"w-full overflow-hidden"},{default:b((()=>[j(x(F),{title:t.title,"data-count":x(o),"chart-height":140},{icon:b((()=>[j($,{"icon-name":t.icon,container:""},null,8,["icon-name"])])),chart:b((()=>[j(x(I),{option:x(d),autoresize:""},null,8,["option"])])),_:1},8,["title","data-count"])])),_:1},8,["show"])}}});export{G as _};
