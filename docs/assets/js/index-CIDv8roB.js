import{P as e}from"./PageWrapper-DDMB-YUZ.js";import{ae as a,a2 as l,a7 as t,ap as n,a4 as o,a5 as s,aq as u,ad as r,ar as i,as as d,ag as p,aj as c,at as h,au as f,a8 as m,av as v,ai as g}from"./celerisComponents-CKh4uVVv.js";import{f as w,t as _,_ as b,C as y,S as k,a as x,b as j,g as S,c as C,d as U,A as M,e as R,T as V}from"./numberUtils-CvbUlCAD.js";import{d as z,R as L,S as P,U as A,V as B,N as D,a2 as q,Q as E,u as F,r as G,m as H,F as I,a7 as N,f as Q,h as T}from"./vue-B5H4WroO.js";import{R as W}from"./Refresh-CfrpWhJN.js";import{u as $}from"./index-20Qch8L1.js";import"./plugin-vueexport-helper-BCo6x5W8.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},K=[A("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[A("path",{d:"M12 15l8.385-8.415a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3z"}),A("path",{d:"M16 5l3 3"}),A("path",{d:"M9 7.07A7.002 7.002 0 0 0 10 21a7.002 7.002 0 0 0 6.929-5.999"})],-1)],O=z({name:"EditCircle",render:function(e,a){return L(),P("svg",J,K)}}),X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Y=[B('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 5H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5.697"></path><path d="M18 12V7a2 2 0 0 0-2-2h-2"></path><rect x="8" y="3" width="6" height="4" rx="2"></rect><path d="M8 11h4"></path><path d="M8 15h3"></path><circle cx="16.5" cy="17.5" r="2.5"></circle><path d="M18.5 19.5L21 22"></path></g>',1)],Z=z({name:"ReportSearch",render:function(e,a){return L(),P("svg",X,Y)}}),ee=e=>[{type:"selection"},...w([["billdate","单据日期"],["name","姓名"],["phone","联系电话"],["address","地址"],["state","单据状态"],["sales","销售金额","right",_("sales")],["payment","收款金额","right",_("payment")],["action","操作","center",e.action]])],ae=z({__name:"action",setup(e){const l=()=>{};return(e,t)=>{const n=b,o=a;return L(),D(o,{justify:"center"},{default:q((()=>[E(n,{title:"查看",onClick:l,icon:F(Z)},null,8,["icon"]),E(n,{title:"编辑",icon:F(O)},null,8,["icon"])])),_:1})}}}),le=z({__name:"index",setup(w){$();const _=l(),z=G(null),A=G(!0),B=G({user:{name:"",age:""},where:"",phone:"",select:"",saleValue:"",stateValue:"",dateRange:[Date.now(),Date.now()]});G();const J=[{label:"批量发起",key:"submit",icon:n(C)},{label:"批量审核",key:"audit",icon:n(U)},{label:"批量驳回",key:"reject",icon:n(M)},{label:"批量反审",key:"reAudit",icon:n(R)},{label:"批量删除",key:"delete",icon:n(V)}],K=["","全部收款","部分收款","未收款"].map((e=>({label:e||"全部",value:e}))),O=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e}))),X=e=>{_.success(e)},Y=e=>{var a;e.preventDefault(),null==(a=z.value)||a.validate((e=>{e?(console.log(e),_.error("Invalid")):Z()}))},Z=()=>{return e=this,a=null,l=function*(){try{ne.isLoading=!0;const{data:e}=yield S();"success"==e.status&&(ne.source=e.data)}catch(e){}finally{ne.isLoading=!1}},new Promise(((t,n)=>{var o=e=>{try{u(l.next(e))}catch(a){n(a)}},s=e=>{try{u(l.throw(e))}catch(a){n(a)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,s);u((l=l.apply(e,a)).next())}));var e,a,l},le={action:e=>T(ae,{})},te=H({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,100],prefix:({itemCount:e})=>`${e}条记录`,onChange:e=>{te.page=e},onUpdatePageSize:e=>{te.pageSize=e,te.page=1}}),ne=H({source:[],isLoading:!1,summary:e=>({name:{value:T("span",{style:{color:"red"}},e.reduce(((e,a)=>e),0)),colSpan:3}})});return Z(),(l,n)=>{const w=o,_=s,S=u,C=r,U=i,M=d,R=b,V=p,G=a,H=c,T=h,$=f,Z=m,ae=v,oe=g,se=e;return L(),D(se,{"use-scrollbar":""},{default:q((()=>[E(oe,null,{default:q((()=>[E(Z,{ref_key:"formRef",ref:z,"label-placement":"left","label-width":"auto",model:F(B)},{default:q((()=>[E(M,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:q((()=>[E(S,null,{default:q((()=>[E(_,{label:"模糊查询",path:"where","show-feedback":!1},{default:q((()=>[E(w,{value:F(B).where,"onUpdate:value":n[0]||(n[0]=e=>F(B).where=e),placeholder:"输入关键字"},null,8,["value"])])),_:1})])),_:1}),E(S,null,{default:q((()=>[E(_,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:q((()=>[E(w,{value:F(B).user.name,"onUpdate:value":n[1]||(n[1]=e=>F(B).user.name=e),placeholder:"输入姓名"},null,8,["value"])])),_:1})])),_:1}),E(S,{span:2},{default:q((()=>[E(_,{label:"单据日期","show-feedback":!1,path:"phone"},{default:q((()=>[E(C,{value:F(B).dateRange,"onUpdate:value":n[2]||(n[2]=e=>F(B).dateRange=e),type:"daterange",clearable:""},null,8,["value"])])),_:1})])),_:1}),E(S,null,{default:q((()=>[E(_,{label:"收款状态","show-feedback":!1,path:"phone"},{default:q((()=>[E(U,{value:F(B).saleValue,"onUpdate:value":n[3]||(n[3]=e=>F(B).saleValue=e),placeholder:"Select",options:F(K)},null,8,["value","options"])])),_:1})])),_:1}),E(S,null,{default:q((()=>[E(_,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:q((()=>[E(U,{value:F(B).stateValue,"onUpdate:value":n[4]||(n[4]=e=>F(B).stateValue=e),placeholder:"Select",options:F(O)},null,8,["value","options"])])),_:1})])),_:1}),F(A)?(L(),P(I,{key:0},[E(S,null,{default:q((()=>[E(_,{label:"电话号码",path:"phone","show-feedback":!1},{default:q((()=>[E(w,{value:F(B).phone,"onUpdate:value":n[5]||(n[5]=e=>F(B).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),E(S,null,{default:q((()=>[E(_,{label:"电话号码",path:"phone","show-feedback":!1},{default:q((()=>[E(w,{value:F(B).phone,"onUpdate:value":n[6]||(n[6]=e=>F(B).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),E(S,null,{default:q((()=>[E(_,{label:"电话号码",path:"phone","show-feedback":!1},{default:q((()=>[E(w,{value:F(B).phone,"onUpdate:value":n[7]||(n[7]=e=>F(B).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1})],64)):N("",!0)])),_:1}),E($,{class:"m-t-sm m-b-sm",justify:"space-between"},{default:q((()=>[E(G,null,{default:q((()=>[E(R,{type:"primary",icon:F(y)},{default:q((()=>[Q("新增")])),_:1},8,["icon"]),E(F(t),{strong:"",secondary:""},{default:q((()=>[Q("下载模板")])),_:1}),E(F(t),{strong:"",secondary:""},{default:q((()=>[Q("批量导入")])),_:1}),E(F(t),{strong:"",secondary:""},{default:q((()=>[Q("导出Excel")])),_:1}),E(F(t),{strong:"",secondary:""},{default:q((()=>[Q("打印")])),_:1}),E(V,{trigger:"hover",options:J,onSelect:X},{default:q((()=>[E(F(t),null,{default:q((()=>[Q("更多...")])),_:1})])),_:1})])),_:1}),E(G,null,{default:q((()=>[E(T,null,{default:q((()=>[E(R,{"attr-type":"button",title:"查询",onClick:Y,type:"info",icon:F(k)},null,8,["icon"]),E(R,{"attr-type":"reset",title:"重置",icon:F(W)},null,8,["icon"]),E(F(t),{"attr-type":"button",onClick:n[8]||(n[8]=e=>A.value=!F(A))},{icon:q((()=>[E(H,{component:F(A)?F(x):F(j),size:16},null,8,["component"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),E(ae,{columns:F(ee)(le),data:F(ne).source,pagination:F(te),loading:F(ne).isLoading},null,8,["columns","data","pagination","loading"])])),_:1})])),_:1})}}});export{le as default};
