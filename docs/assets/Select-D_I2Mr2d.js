import{a2 as e,cM as n,aL as o,d as t,i as l,b1 as r,bE as i,v as a,N as s,T as d,z as u,A as c,Q as p,y as h,U as v,aw as b,C as f,D as g,F as m,az as w,cN as y,a as x,l as F,a0 as C,an as O,a8 as S,Y as P,bs as z,a4 as T,G as k,x as R,a$ as M,av as B,aI as $,cO as A,a1 as I,cP as D,H as E,cQ as _,ax as j,aA as N,aB as L,bG as K,aC as W,aF as V,aE as U,aD as H}from"./index-BT0ZcDkn.js";import{u as G}from"./use-merged-state-D7wGS6Km.js";import{u as q}from"./use-compitable-CHcH6xDN.js";import{b as Q,h as Y,c as Z}from"./create-Bylz8BGN.js";import{u as J}from"./use-locale-CbMPSc0o.js";import{i as X,d as ee,_ as ne,u as oe,B as te,V as le,a as re}from"./Popover-3mPJ01hC.js";import{a as ie}from"./Input-D2qMgPO1.js";import{T as ae}from"./Tag-D4OMG_5z.js";import{V as se}from"./index-LLZlmyqL.js";import{F as de,V as ue}from"./FocusDetector-C7V71fRC.js";import{F as ce}from"./Checkmark-DuWLWy-v.js";import{_ as pe}from"./Empty-C_CzYco1.js";function he(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function ve(e){const n=e.filter((e=>void 0!==e));if(0!==n.length)return 1===n.length?n[0]:n=>{e.forEach((e=>{e&&e(n)}))}}function be(t,l){l&&(e((()=>{const{value:e}=t;e&&n.registerHandler(e,l)})),o((()=>{const{value:e}=t;e&&n.unregisterHandler(e)})))}const fe=t({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:o,multipleRef:t,valueSetRef:i,renderLabelRef:a,renderOptionRef:s,labelFieldRef:d,valueFieldRef:u,showCheckmarkRef:c,nodePropsRef:p,handleOptionClick:h,handleOptionMouseEnter:v}=l(X),b=r((()=>{const{value:n}=o;return!!n&&e.tmNode.key===n.key}));return{multiple:t,isGrouped:r((()=>{const{tmNode:n}=e,{parent:o}=n;return o&&"group"===o.rawNode.type})),showCheckmark:c,nodeProps:p,isPending:b,isSelected:r((()=>{const{value:o}=n,{value:l}=t;if(null===o)return!1;const r=e.tmNode.rawNode[u.value];if(l){const{value:e}=i;return e.has(r)}return o===r})),labelField:d,renderLabel:a,renderOption:s,handleMouseMove:function(n){const{tmNode:o}=e,{value:t}=b;o.disabled||t||v(n,o)},handleMouseEnter:function(n){const{tmNode:o}=e;o.disabled||v(n,o)},handleClick:function(n){const{tmNode:o}=e;o.disabled||h(n,o)}}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:o,isPending:t,isGrouped:l,showCheckmark:r,nodeProps:u,renderOption:c,renderLabel:p,handleClick:h,handleMouseEnter:v,handleMouseMove:b}=this,f=function(e,n){return a(d,{name:"fade-in-scale-up-transition"},{default:()=>e?a(s,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>a(ce)}):null})}(o,e),g=p?[p(n,o),r&&f]:[i(n[this.labelField],n,o),r&&f],m=null==u?void 0:u(n),w=a("div",Object.assign({},m,{class:[`${e}-base-select-option`,n.class,null==m?void 0:m.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:o,[`${e}-base-select-option--grouped`]:l,[`${e}-base-select-option--pending`]:t,[`${e}-base-select-option--show-checkmark`]:r}],style:[(null==m?void 0:m.style)||"",n.style||""],onClick:ve([h,null==m?void 0:m.onClick]),onMouseenter:ve([v,null==m?void 0:m.onMouseenter]),onMousemove:ve([b,null==m?void 0:m.onMousemove])}),a("div",{class:`${e}-base-select-option__content`},g));return n.render?n.render({node:w,option:n,selected:o}):c?c({node:w,option:n,selected:o}):w}}),ge=t({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:o,nodePropsRef:t}=l(X);return{labelField:o,nodeProps:t,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:o,nodeProps:t,tmNode:{rawNode:l}}=this,r=null==t?void 0:t(l),s=n?n(l,!1):i(l[this.labelField],l,!1),d=a("div",Object.assign({},r,{class:[`${e}-base-select-group-header`,null==r?void 0:r.class]}),s);return l.render?l.render({node:d,option:l}):o?o({node:d,option:l,selected:!1}):d}}),me=u("base-select-menu","\n line-height: 1.5;\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--n-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-color);\n",[u("scrollbar","\n max-height: var(--n-height);\n "),u("virtual-list","\n max-height: var(--n-height);\n "),u("base-select-option","\n min-height: var(--n-option-height);\n font-size: var(--n-option-font-size);\n display: flex;\n align-items: center;\n ",[c("content","\n z-index: 1;\n white-space: nowrap;\n text-overflow: ellipsis;\n overflow: hidden;\n ")]),u("base-select-group-header","\n min-height: var(--n-option-height);\n font-size: .93em;\n display: flex;\n align-items: center;\n "),u("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),c("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),c("loading","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n "),c("header","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),c("action","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-top: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),u("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--n-option-padding);\n color: var(--n-group-header-text-color);\n "),u("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--n-option-padding);\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n box-sizing: border-box;\n color: var(--n-option-text-color);\n opacity: 1;\n ",[p("show-checkmark","\n padding-right: calc(var(--n-option-padding-right) + 20px);\n "),h("&::before",'\n content: "";\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),h("&:active","\n color: var(--n-option-text-color-pressed);\n "),p("grouped","\n padding-left: calc(var(--n-option-padding-left) * 1.5);\n "),p("pending",[h("&::before","\n background-color: var(--n-option-color-pending);\n ")]),p("selected","\n color: var(--n-option-text-color-active);\n ",[h("&::before","\n background-color: var(--n-option-color-active);\n "),p("pending",[h("&::before","\n background-color: var(--n-option-color-active-pending);\n ")])]),p("disabled","\n cursor: not-allowed;\n ",[v("selected","\n color: var(--n-option-text-color-disabled);\n "),p("selected","\n opacity: var(--n-option-opacity-disabled);\n ")]),c("check","\n font-size: 16px;\n position: absolute;\n right: calc(var(--n-option-padding-right) - 4px);\n top: calc(50% - 7px);\n color: var(--n-option-check-color);\n transition: color .3s var(--n-bezier);\n ",[b({enterScale:"0.5"})])])]),we=t({name:"InternalSelectMenu",props:Object.assign(Object.assign({},f.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(n){const{mergedClsPrefixRef:t,mergedRtlRef:l}=g(n),r=m("InternalSelectMenu",l,t),i=f("InternalSelectMenu","-internal-select-menu",me,y,n,w(n,"clsPrefix")),a=x(null),s=x(null),d=x(null),u=F((()=>n.treeMate.getFlattenedNodes())),c=F((()=>Q(u.value))),p=x(null);function h(){const{value:e}=p;e&&!n.treeMate.getNode(e.key)&&(p.value=null)}let v;C((()=>n.show),(e=>{e?v=C((()=>n.treeMate),(()=>{n.resetMenuOnOptionsChange?(n.autoPending?function(){const{treeMate:e}=n;let o=null;const{value:t}=n;null===t?o=e.getFirstAvailableNode():(o=n.multiple?e.getNode((t||[])[(t||[]).length-1]):e.getNode(t),o&&!o.disabled||(o=e.getFirstAvailableNode())),A(o||null)}():h(),O(I)):h()}),{immediate:!0}):null==v||v()}),{immediate:!0}),o((()=>{null==v||v()}));const b=F((()=>S(i.value.self[P("optionHeight",n.size)]))),R=F((()=>z(i.value.self[P("padding",n.size)]))),M=F((()=>n.multiple&&Array.isArray(n.value)?new Set(n.value):new Set)),B=F((()=>{const e=u.value;return e&&0===e.length}));function $(e){const{onScroll:o}=n;o&&o(e)}function A(e,n=!1){p.value=e,n&&I()}function I(){var e,o;const t=p.value;if(!t)return;const l=c.value(t.key);null!==l&&(n.virtualScroll?null===(e=s.value)||void 0===e||e.scrollTo({index:l}):null===(o=d.value)||void 0===o||o.scrollTo({index:l,elSize:b.value}))}T(X,{handleOptionMouseEnter:function(e,n){n.disabled||A(n,!1)},handleOptionClick:function(e,o){o.disabled||function(e){const{onToggle:o}=n;o&&o(e)}(o)},valueSetRef:M,pendingTmNodeRef:p,nodePropsRef:w(n,"nodeProps"),showCheckmarkRef:w(n,"showCheckmark"),multipleRef:w(n,"multiple"),valueRef:w(n,"value"),renderLabelRef:w(n,"renderLabel"),renderOptionRef:w(n,"renderOption"),labelFieldRef:w(n,"labelField"),valueFieldRef:w(n,"valueField")}),T(ee,a),e((()=>{const{value:e}=d;e&&e.sync()}));const D=F((()=>{const{size:e}=n,{common:{cubicBezierEaseInOut:o},self:{height:t,borderRadius:l,color:r,groupHeaderTextColor:a,actionDividerColor:s,optionTextColorPressed:d,optionTextColor:u,optionTextColorDisabled:c,optionTextColorActive:p,optionOpacityDisabled:h,optionCheckColor:v,actionTextColor:b,optionColorPending:f,optionColorActive:g,loadingColor:m,loadingSize:w,optionColorActivePending:y,[P("optionFontSize",e)]:x,[P("optionHeight",e)]:F,[P("optionPadding",e)]:C}}=i.value;return{"--n-height":t,"--n-action-divider-color":s,"--n-action-text-color":b,"--n-bezier":o,"--n-border-radius":l,"--n-color":r,"--n-option-font-size":x,"--n-group-header-text-color":a,"--n-option-check-color":v,"--n-option-color-pending":f,"--n-option-color-active":g,"--n-option-color-active-pending":y,"--n-option-height":F,"--n-option-opacity-disabled":h,"--n-option-text-color":u,"--n-option-text-color-active":p,"--n-option-text-color-disabled":c,"--n-option-text-color-pressed":d,"--n-option-padding":C,"--n-option-padding-left":z(C,"left"),"--n-option-padding-right":z(C,"right"),"--n-loading-color":m,"--n-loading-size":w}})),{inlineThemeDisabled:E}=n,_=E?k("internal-select-menu",F((()=>n.size[0])),D,n):void 0,j={selfRef:a,next:function(){const{value:e}=p;e&&A(e.getNext({loop:!0}),!0)},prev:function(){const{value:e}=p;e&&A(e.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:e}=p;return e||null}};return be(a,n.onResize),Object.assign({mergedTheme:i,mergedClsPrefix:t,rtlEnabled:r,virtualListRef:s,scrollbarRef:d,itemSize:b,padding:R,flattenedNodes:u,empty:B,virtualListContainer(){const{value:e}=s;return null==e?void 0:e.listElRef},virtualListContent(){const{value:e}=s;return null==e?void 0:e.itemsElRef},doScroll:$,handleFocusin:function(e){var o,t;(null===(o=a.value)||void 0===o?void 0:o.contains(e.target))&&(null===(t=n.onFocus)||void 0===t||t.call(n,e))},handleFocusout:function(e){var o,t;(null===(o=a.value)||void 0===o?void 0:o.contains(e.relatedTarget))||null===(t=n.onBlur)||void 0===t||t.call(n,e)},handleKeyUp:function(e){var o;Y(e,"action")||null===(o=n.onKeyup)||void 0===o||o.call(n,e)},handleKeyDown:function(e){var o;Y(e,"action")||null===(o=n.onKeydown)||void 0===o||o.call(n,e)},handleMouseDown:function(e){var o;null===(o=n.onMousedown)||void 0===o||o.call(n,e),n.focusable||e.preventDefault()},handleVirtualListResize:function(){var e;null===(e=d.value)||void 0===e||e.sync()},handleVirtualListScroll:function(e){var n;null===(n=d.value)||void 0===n||n.sync(),$(e)},cssVars:E?void 0:D,themeClass:null==_?void 0:_.themeClass,onRender:null==_?void 0:_.onRender},j)},render(){const{$slots:e,virtualScroll:n,clsPrefix:o,mergedTheme:t,themeClass:l,onRender:r}=this;return null==r||r(),a("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,this.rtlEnabled&&`${o}-base-select-menu--rtl`,l,this.multiple&&`${o}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},R(e.header,(e=>e&&a("div",{class:`${o}-base-select-menu__header`,"data-header":!0,key:"header"},e))),this.loading?a("div",{class:`${o}-base-select-menu__loading`},a(M,{clsPrefix:o,strokeWidth:20})):this.empty?a("div",{class:`${o}-base-select-menu__empty`,"data-empty":!0},$(e.empty,(()=>[a(pe,{theme:t.peers.Empty,themeOverrides:t.peerOverrides.Empty,size:this.size})]))):a(B,{ref:"scrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?a(ue,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:e})=>e.isGroup?a(ge,{key:e.key,clsPrefix:o,tmNode:e}):e.ignored?null:a(fe,{clsPrefix:o,key:e.key,tmNode:e})}):a("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((e=>e.isGroup?a(ge,{key:e.key,clsPrefix:o,tmNode:e}):a(fe,{clsPrefix:o,key:e.key,tmNode:e}))))}),R(e.action,(e=>e&&[a("div",{class:`${o}-base-select-menu__action`,"data-action":!0,key:"action"},e),a(de,{onFocus:this.onTabOut,key:"focus-detector"})])))}}),ye=h([u("base-selection","\n --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);\n --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[u("base-loading","\n color: var(--n-loading-color);\n "),u("base-selection-tags","min-height: var(--n-height);"),c("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),c("state-border","\n z-index: 1;\n border-color: #0000;\n "),u("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[c("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),u("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[c("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),u("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[c("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),u("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),u("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[u("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[c("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),c("render-label","\n color: var(--n-text-color);\n ")]),v("disabled",[h("&:hover",[c("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),p("focus",[c("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),p("active",[c("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),u("base-selection-label","background-color: var(--n-color-active);"),u("base-selection-tags","background-color: var(--n-color-active);")])]),p("disabled","cursor: not-allowed;",[c("arrow","\n color: var(--n-arrow-color-disabled);\n "),u("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[u("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),c("render-label","\n color: var(--n-text-color-disabled);\n ")]),u("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),u("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),u("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[c("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),c("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>p(`${e}-status`,[c("state-border",`border: var(--n-border-${e});`),v("disabled",[h("&:hover",[c("state-border",`\n box-shadow: var(--n-box-shadow-hover-${e});\n border: var(--n-border-hover-${e});\n `)]),p("active",[c("state-border",`\n box-shadow: var(--n-box-shadow-active-${e});\n border: var(--n-border-active-${e});\n `),u("base-selection-label",`background-color: var(--n-color-active-${e});`),u("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),p("focus",[c("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),u("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),u("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[h("&:last-child","padding-right: 0;"),u("tag","\n font-size: 14px;\n max-width: 100%;\n ",[c("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),xe=t({name:"InternalSelection",props:Object.assign(Object.assign({},f.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(n){const{mergedClsPrefixRef:o,mergedRtlRef:t}=g(n),l=m("InternalSelection",t,o),r=x(null),a=x(null),s=x(null),d=x(null),u=x(null),c=x(null),p=x(null),h=x(null),v=x(null),b=x(null),y=x(!1),S=x(!1),T=x(!1),R=f("InternalSelection","-internal-selection",ye,A,n,w(n,"clsPrefix")),M=F((()=>n.clearable&&!n.disabled&&(T.value||n.active))),B=F((()=>n.selectedOption?n.renderTag?n.renderTag({option:n.selectedOption,handleClose:()=>{}}):n.renderLabel?n.renderLabel(n.selectedOption,!0):i(n.selectedOption[n.labelField],n.selectedOption,!0):n.placeholder)),$=F((()=>{const e=n.selectedOption;if(e)return e[n.labelField]})),D=F((()=>n.multiple?!(!Array.isArray(n.selectedOptions)||!n.selectedOptions.length):null!==n.selectedOption));function E(){var e;const{value:o}=r;if(o){const{value:t}=a;t&&(t.style.width=`${o.offsetWidth}px`,"responsive"!==n.maxTagCount&&(null===(e=v.value)||void 0===e||e.sync({showAllItemsBeforeCalculate:!1})))}}function _(e){const{onPatternInput:o}=n;o&&o(e)}function j(e){!function(e){const{onDeleteOption:o}=n;o&&o(e)}(e)}C(w(n,"active"),(e=>{e||function(){const{value:e}=b;e&&(e.style.display="none")}()})),C(w(n,"pattern"),(()=>{n.multiple&&O(E)}));const N=x(!1);let L=null;let K=null;function W(){null!==K&&window.clearTimeout(K)}C(D,(e=>{e||(y.value=!1)})),e((()=>{I((()=>{const e=c.value;e&&(n.disabled?e.removeAttribute("tabindex"):e.tabIndex=S.value?-1:0)}))})),be(s,n.onResize);const{inlineThemeDisabled:V}=n,U=F((()=>{const{size:e}=n,{common:{cubicBezierEaseInOut:o},self:{borderRadius:t,color:l,placeholderColor:r,textColor:i,paddingSingle:a,paddingMultiple:s,caretColor:d,colorDisabled:u,textColorDisabled:c,placeholderColorDisabled:p,colorActive:h,boxShadowFocus:v,boxShadowActive:b,boxShadowHover:f,border:g,borderFocus:m,borderHover:w,borderActive:y,arrowColor:x,arrowColorDisabled:F,loadingColor:C,colorActiveWarning:O,boxShadowFocusWarning:S,boxShadowActiveWarning:T,boxShadowHoverWarning:k,borderWarning:M,borderFocusWarning:B,borderHoverWarning:$,borderActiveWarning:A,colorActiveError:I,boxShadowFocusError:D,boxShadowActiveError:E,boxShadowHoverError:_,borderError:j,borderFocusError:N,borderHoverError:L,borderActiveError:K,clearColor:W,clearColorHover:V,clearColorPressed:U,clearSize:H,arrowSize:G,[P("height",e)]:q,[P("fontSize",e)]:Q}}=R.value,Y=z(a),Z=z(s);return{"--n-bezier":o,"--n-border":g,"--n-border-active":y,"--n-border-focus":m,"--n-border-hover":w,"--n-border-radius":t,"--n-box-shadow-active":b,"--n-box-shadow-focus":v,"--n-box-shadow-hover":f,"--n-caret-color":d,"--n-color":l,"--n-color-active":h,"--n-color-disabled":u,"--n-font-size":Q,"--n-height":q,"--n-padding-single-top":Y.top,"--n-padding-multiple-top":Z.top,"--n-padding-single-right":Y.right,"--n-padding-multiple-right":Z.right,"--n-padding-single-left":Y.left,"--n-padding-multiple-left":Z.left,"--n-padding-single-bottom":Y.bottom,"--n-padding-multiple-bottom":Z.bottom,"--n-placeholder-color":r,"--n-placeholder-color-disabled":p,"--n-text-color":i,"--n-text-color-disabled":c,"--n-arrow-color":x,"--n-arrow-color-disabled":F,"--n-loading-color":C,"--n-color-active-warning":O,"--n-box-shadow-focus-warning":S,"--n-box-shadow-active-warning":T,"--n-box-shadow-hover-warning":k,"--n-border-warning":M,"--n-border-focus-warning":B,"--n-border-hover-warning":$,"--n-border-active-warning":A,"--n-color-active-error":I,"--n-box-shadow-focus-error":D,"--n-box-shadow-active-error":E,"--n-box-shadow-hover-error":_,"--n-border-error":j,"--n-border-focus-error":N,"--n-border-hover-error":L,"--n-border-active-error":K,"--n-clear-size":H,"--n-clear-color":W,"--n-clear-color-hover":V,"--n-clear-color-pressed":U,"--n-arrow-size":G}})),H=V?k("internal-selection",F((()=>n.size[0])),U,n):void 0;return{mergedTheme:R,mergedClearable:M,mergedClsPrefix:o,rtlEnabled:l,patternInputFocused:S,filterablePlaceholder:B,label:$,selected:D,showTagsPanel:y,isComposing:N,counterRef:p,counterWrapperRef:h,patternInputMirrorRef:r,patternInputRef:a,selfRef:s,multipleElRef:d,singleElRef:u,patternInputWrapperRef:c,overflowRef:v,inputTagElRef:b,handleMouseDown:function(e){n.active&&n.filterable&&e.target!==a.value&&e.preventDefault()},handleFocusin:function(e){var o;e.relatedTarget&&(null===(o=s.value)||void 0===o?void 0:o.contains(e.relatedTarget))||function(e){const{onFocus:o}=n;o&&o(e)}(e)},handleClear:function(e){!function(e){const{onClear:o}=n;o&&o(e)}(e)},handleMouseEnter:function(){T.value=!0},handleMouseLeave:function(){T.value=!1},handleDeleteOption:j,handlePatternKeyDown:function(e){if("Backspace"===e.key&&!N.value&&!n.pattern.length){const{selectedOptions:e}=n;(null==e?void 0:e.length)&&j(e[e.length-1])}},handlePatternInputInput:function(e){const{value:o}=r;if(o){const n=e.target.value;o.textContent=n,E()}n.ignoreComposition&&N.value?L=e:_(e)},handlePatternInputBlur:function(e){var o;S.value=!1,null===(o=n.onPatternBlur)||void 0===o||o.call(n,e)},handlePatternInputFocus:function(e){var o;S.value=!0,null===(o=n.onPatternFocus)||void 0===o||o.call(n,e)},handleMouseEnterCounter:function(){n.active||(W(),K=window.setTimeout((()=>{D.value&&(y.value=!0)}),100))},handleMouseLeaveCounter:function(){W()},handleFocusout:function(e){var o;(null===(o=s.value)||void 0===o?void 0:o.contains(e.relatedTarget))||function(e){const{onBlur:o}=n;o&&o(e)}(e)},handleCompositionEnd:function(){N.value=!1,n.ignoreComposition&&_(L),L=null},handleCompositionStart:function(){N.value=!0},onPopoverUpdateShow:function(e){e||(W(),y.value=!1)},focus:function(){var e,o,t;n.filterable?(S.value=!1,null===(e=c.value)||void 0===e||e.focus()):n.multiple?null===(o=d.value)||void 0===o||o.focus():null===(t=u.value)||void 0===t||t.focus()},focusInput:function(){const{value:e}=a;e&&(!function(){const{value:e}=b;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var e,o;if(n.filterable)S.value=!1,null===(e=c.value)||void 0===e||e.blur(),null===(o=a.value)||void 0===o||o.blur();else if(n.multiple){const{value:e}=d;null==e||e.blur()}else{const{value:e}=u;null==e||e.blur()}},blurInput:function(){const{value:e}=a;e&&e.blur()},updateCounter:function(e){const{value:n}=p;n&&n.setTextContent(`+${e}`)},getCounter:function(){const{value:e}=h;return e},getTail:function(){return a.value},renderLabel:n.renderLabel,cssVars:V?void 0:U,themeClass:null==H?void 0:H.themeClass,onRender:null==H?void 0:H.onRender}},render(){const{status:e,multiple:n,size:o,disabled:t,filterable:l,maxTagCount:r,bordered:s,clsPrefix:d,ellipsisTagPopoverProps:u,onRender:c,renderTag:p,renderLabel:h}=this;null==c||c();const v="responsive"===r,b="number"==typeof r,f=v||b,g=a(D,null,{default:()=>a(ie,{clsPrefix:d,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,n;return null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)}})});let m;if(n){const{labelField:e}=this,n=n=>a("div",{class:`${d}-base-selection-tag-wrapper`,key:n.value},p?p({option:n,handleClose:()=>{this.handleDeleteOption(n)}}):a(ae,{size:o,closable:!n.disabled,disabled:t,onClose:()=>{this.handleDeleteOption(n)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>h?h(n,!0):i(n[e],n,!0)})),s=()=>(b?this.selectedOptions.slice(0,r):this.selectedOptions).map(n),c=l?a("div",{class:`${d}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},a("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:t,value:this.pattern,autofocus:this.autofocus,class:`${d}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),a("span",{ref:"patternInputMirrorRef",class:`${d}-base-selection-input-tag__mirror`},this.pattern)):null,w=v?()=>a("div",{class:`${d}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},a(ae,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:t})):void 0;let y;if(b){const e=this.selectedOptions.length-r;e>0&&(y=a("div",{class:`${d}-base-selection-tag-wrapper`,key:"__counter__"},a(ae,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:t},{default:()=>`+${e}`})))}const x=v?l?a(se,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:s,counter:w,tail:()=>c}):a(se,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:s,counter:w}):b&&y?s().concat(y):s(),F=f?()=>a("div",{class:`${d}-base-selection-popover`},v?s():this.selectedOptions.map(n)):void 0,C=f?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},u):null,O=!this.selected&&(!this.active||!this.pattern&&!this.isComposing)?a("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`},a("div",{class:`${d}-base-selection-placeholder__inner`},this.placeholder)):null,S=l?a("div",{ref:"patternInputWrapperRef",class:`${d}-base-selection-tags`},x,v?null:c,g):a("div",{ref:"multipleElRef",class:`${d}-base-selection-tags`,tabindex:t?void 0:0},x,g);m=a(E,null,f?a(ne,Object.assign({},C,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>S,default:F}):S,O)}else if(l){const e=this.pattern||this.isComposing,n=this.active?!e:!this.selected,o=!this.active&&this.selected;m=a("div",{ref:"patternInputWrapperRef",class:`${d}-base-selection-label`,title:this.patternInputFocused?void 0:he(this.label)},a("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${d}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:t,disabled:t,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),o?a("div",{class:`${d}-base-selection-label__render-label ${d}-base-selection-overlay`,key:"input"},a("div",{class:`${d}-base-selection-overlay__wrapper`},p?p({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):i(this.label,this.selectedOption,!0))):null,n?a("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`,key:"placeholder"},a("div",{class:`${d}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,g)}else m=a("div",{ref:"singleElRef",class:`${d}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?a("div",{class:`${d}-base-selection-input`,title:he(this.label),key:"input"},a("div",{class:`${d}-base-selection-input__content`},p?p({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):i(this.label,this.selectedOption,!0))):a("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`,key:"placeholder"},a("div",{class:`${d}-base-selection-placeholder__inner`},this.placeholder)),g);return a("div",{ref:"selfRef",class:[`${d}-base-selection`,this.rtlEnabled&&`${d}-base-selection--rtl`,this.themeClass,e&&`${d}-base-selection--${e}-status`,{[`${d}-base-selection--active`]:this.active,[`${d}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${d}-base-selection--disabled`]:this.disabled,[`${d}-base-selection--multiple`]:this.multiple,[`${d}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},m,s?a("div",{class:`${d}-base-selection__border`}):null,s?a("div",{class:`${d}-base-selection__state-border`}):null)}});function Fe(e){return"group"===e.type}function Ce(e){return"ignored"===e.type}function Oe(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch(o){return!1}}function Se(e,n){return{getIsGroup:Fe,getIgnored:Ce,getKey:n=>Fe(n)?n.name||n.key||"key-required":n[e],getChildren:e=>e[n]}}const Pe=h([u("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),u("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[b({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),ze=t({name:"Select",props:Object.assign(Object.assign({},f.props),{to:oe.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:o,namespaceRef:t,inlineThemeDisabled:l}=g(e),r=f("Select","-select",Pe,_,e,n),i=x(e.defaultValue),a=w(e,"value"),s=G(a,i),d=x(!1),u=x(""),c=q(e,["items","options"]),p=x([]),h=x([]),v=F((()=>h.value.concat(p.value).concat(c.value))),b=F((()=>{const{filter:n}=e;if(n)return n;const{labelField:o,valueField:t}=e;return(e,n)=>{if(!n)return!1;const l=n[o];if("string"==typeof l)return Oe(e,l);const r=n[t];return"string"==typeof r?Oe(e,r):"number"==typeof r&&Oe(e,String(r))}})),m=F((()=>{if(e.remote)return c.value;{const{value:n}=v,{value:o}=u;return o.length&&e.filterable?function(e,n,o,t){return n?function e(l){if(!Array.isArray(l))return[];const r=[];for(const i of l)if(Fe(i)){const n=e(i[t]);n.length&&r.push(Object.assign({},i,{[t]:n}))}else{if(Ce(i))continue;n(o,i)&&r.push(i)}return r}(e):e}(n,b.value,o,e.childrenField):n}})),y=F((()=>{const{valueField:n,childrenField:o}=e,t=Se(n,o);return Z(m.value,t)})),O=F((()=>function(e,n,o){const t=new Map;return e.forEach((e=>{Fe(e)?e[o].forEach((e=>{t.set(e[n],e)})):t.set(e[n],e)})),t}(v.value,e.valueField,e.childrenField))),S=x(!1),P=G(w(e,"show"),S),z=x(null),T=x(null),R=x(null),{localeRef:M}=J("Select"),B=F((()=>{var n;return null!==(n=e.placeholder)&&void 0!==n?n:M.value.placeholder})),$=[],A=x(new Map),I=F((()=>{const{fallbackOption:n}=e;if(void 0===n){const{labelField:n,valueField:o}=e;return e=>({[n]:String(e),[o]:e})}return!1!==n&&(e=>Object.assign(n(e),{value:e}))}));function D(n){const o=e.remote,{value:t}=A,{value:l}=O,{value:r}=I,i=[];return n.forEach((e=>{if(l.has(e))i.push(l.get(e));else if(o&&t.has(e))i.push(t.get(e));else if(r){const n=r(e);n&&i.push(n)}})),i}const E=F((()=>{if(e.multiple){const{value:e}=s;return Array.isArray(e)?D(e):[]}return null})),L=F((()=>{const{value:n}=s;return e.multiple||Array.isArray(n)||null===n?null:D([n])[0]||null})),K=j(e),{mergedSizeRef:W,mergedDisabledRef:Q,mergedStatusRef:X}=K;function ee(n,o){const{onChange:t,"onUpdate:value":l,onUpdateValue:r}=e,{nTriggerFormChange:a,nTriggerFormInput:s}=K;t&&H(t,n,o),r&&H(r,n,o),l&&H(l,n,o),i.value=n,a(),s()}function ne(n){const{onBlur:o}=e,{nTriggerFormBlur:t}=K;o&&H(o,n),t()}function te(){var n;const{remote:o,multiple:t}=e;if(o){const{value:o}=A;if(t){const{valueField:t}=e;null===(n=E.value)||void 0===n||n.forEach((e=>{o.set(e[t],e)}))}else{const n=L.value;n&&o.set(n[e.valueField],n)}}}function le(n){const{onUpdateShow:o,"onUpdate:show":t}=e;o&&H(o,n),t&&H(t,n),S.value=n}function re(){Q.value||(le(!0),S.value=!0,e.filterable&&ve())}function ie(){le(!1)}function ae(){u.value="",h.value=$}const se=x(!1);function de(e){ue(e.rawNode)}function ue(n){if(Q.value)return;const{tag:o,remote:t,clearFilterAfterSelect:l,valueField:r}=e;if(o&&!t){const{value:e}=h,n=e[0]||null;if(n){const e=p.value;e.length?e.push(n):p.value=[n],h.value=$}}if(t&&A.value.set(n[r],n),e.multiple){const i=function(n){if(!Array.isArray(n))return[];if(I.value)return Array.from(n);{const{remote:o}=e,{value:t}=O;if(o){const{value:e}=A;return n.filter((n=>t.has(n)||e.has(n)))}return n.filter((e=>t.has(e)))}}(s.value),a=i.findIndex((e=>e===n[r]));if(~a){if(i.splice(a,1),o&&!t){const e=ce(n[r]);~e&&(p.value.splice(e,1),l&&(u.value=""))}}else i.push(n[r]),l&&(u.value="");ee(i,D(i))}else{if(o&&!t){const e=ce(n[r]);p.value=~e?[p.value[e]]:$}he(),ie(),ee(n[r],n)}}function ce(n){return p.value.findIndex((o=>o[e.valueField]===n))}function pe(n){var o,t,l,r,i;if(e.keyboard)switch(n.key){case" ":if(e.filterable)break;n.preventDefault();case"Enter":if(!(null===(o=z.value)||void 0===o?void 0:o.isComposing))if(P.value){const n=null===(t=R.value)||void 0===t?void 0:t.getPendingTmNode();n?de(n):e.filterable||(ie(),he())}else if(re(),e.tag&&se.value){const n=h.value[0];if(n){const o=n[e.valueField],{value:t}=s;e.multiple&&Array.isArray(t)&&t.includes(o)||ue(n)}}n.preventDefault();break;case"ArrowUp":if(n.preventDefault(),e.loading)return;P.value&&(null===(l=R.value)||void 0===l||l.prev());break;case"ArrowDown":if(n.preventDefault(),e.loading)return;P.value?null===(r=R.value)||void 0===r||r.next():re();break;case"Escape":P.value&&(U(n),ie()),null===(i=z.value)||void 0===i||i.focus()}else n.preventDefault()}function he(){var e;null===(e=z.value)||void 0===e||e.focus()}function ve(){var e;null===(e=z.value)||void 0===e||e.focusInput()}te(),C(w(e,"options"),te);const be={focus:()=>{var e;null===(e=z.value)||void 0===e||e.focus()},focusInput:()=>{var e;null===(e=z.value)||void 0===e||e.focusInput()},blur:()=>{var e;null===(e=z.value)||void 0===e||e.blur()},blurInput:()=>{var e;null===(e=z.value)||void 0===e||e.blurInput()}},fe=F((()=>{const{self:{menuBoxShadow:e}}=r.value;return{"--n-menu-box-shadow":e}})),ge=l?k("select",void 0,fe,e):void 0;return Object.assign(Object.assign({},be),{mergedStatus:X,mergedClsPrefix:n,mergedBordered:o,namespace:t,treeMate:y,isMounted:N(),triggerRef:z,menuRef:R,pattern:u,uncontrolledShow:S,mergedShow:P,adjustedTo:oe(e),uncontrolledValue:i,mergedValue:s,followerRef:T,localizedPlaceholder:B,selectedOption:L,selectedOptions:E,mergedSize:W,mergedDisabled:Q,focused:d,activeWithoutMenuOpen:se,inlineThemeDisabled:l,onTriggerInputFocus:function(){e.filterable&&(se.value=!0)},onTriggerInputBlur:function(){e.filterable&&(se.value=!1,P.value||ae())},handleTriggerOrMenuResize:function(){var e;P.value&&(null===(e=T.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(){d.value=!0},handleMenuBlur:function(e){var n;(null===(n=z.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(d.value=!1,ne(e),ie())},handleMenuTabOut:function(){var e;null===(e=z.value)||void 0===e||e.focus(),ie()},handleTriggerClick:function(){Q.value||(P.value?e.filterable?ve():ie():re())},handleToggle:de,handleDeleteOption:ue,handlePatternInput:function(n){P.value||re();const{value:o}=n.target;u.value=o;const{tag:t,remote:l}=e;if(function(n){const{onSearch:o}=e;o&&H(o,n)}(o),t&&!l){if(!o)return void(h.value=$);const{onCreate:n}=e,t=n?n(o):{[e.labelField]:o,[e.valueField]:o},{valueField:l,labelField:r}=e;c.value.some((e=>e[l]===t[l]||e[r]===t[r]))||p.value.some((e=>e[l]===t[l]||e[r]===t[r]))?h.value=$:h.value=[t]}},handleClear:function(n){n.stopPropagation();const{multiple:o}=e;!o&&e.filterable&&ie(),function(){const{onClear:n}=e;n&&H(n)}(),o?ee([],[]):ee(null,null)},handleTriggerBlur:function(e){var n,o;(null===(o=null===(n=R.value)||void 0===n?void 0:n.selfRef)||void 0===o?void 0:o.contains(e.relatedTarget))||(d.value=!1,ne(e),ie())},handleTriggerFocus:function(n){!function(n){const{onFocus:o,showOnFocus:t}=e,{nTriggerFormFocus:l}=K;o&&H(o,n),l(),t&&re()}(n),d.value=!0},handleKeydown:pe,handleMenuAfterLeave:ae,handleMenuClickOutside:function(e){var n;P.value&&((null===(n=z.value)||void 0===n?void 0:n.$el.contains(V(e)))||ie())},handleMenuScroll:function(n){!function(n){const{onScroll:o}=e;o&&H(o,n)}(n)},handleMenuKeydown:pe,handleMenuMousedown:function(e){Y(e,"action")||Y(e,"empty")||Y(e,"header")||e.preventDefault()},mergedTheme:r,cssVars:l?void 0:fe,themeClass:null==ge?void 0:ge.themeClass,onRender:null==ge?void 0:ge.onRender})},render(){return a("div",{class:`${this.mergedClsPrefix}-select`},a(te,null,{default:()=>[a(le,null,{default:()=>a(xe,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)]}})}),a(re,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===oe.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>a(d,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,o;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),L(a(we,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,null===(n=this.menuProps)||void 0===n?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(o=this.menuProps)||void 0===o?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,n;return[null===(n=(e=this.$slots).empty)||void 0===n?void 0:n.call(e)]},header:()=>{var e,n;return[null===(n=(e=this.$slots).header)||void 0===n?void 0:n.call(e)]},action:()=>{var e,n;return[null===(n=(e=this.$slots).action)||void 0===n?void 0:n.call(e)]}}),"show"===this.displayDirective?[[K,this.mergedShow],[W,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[W,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});export{we as N,ze as _,Se as c,ve as m};
