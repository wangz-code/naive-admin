import{_ as e,p as s}from"./Popover-DGl25HLV.js";import{c as o,N as t,m as n}from"./Select-aQlCvl3F.js";import{an as r,z as a,d as l,i,D as u,C as c,br as d,l as p,a0 as h,ag as v,as as m,G as g,v as f,aH as y,ax as b,a as w,at as P,a3 as M,bs as O}from"./index-BvLEaQlu.js";import{c as S,h as j,a as C}from"./create-Bylz8BGN.js";const x=r("n-popselect"),T=a("popselect-menu","\n box-shadow: var(--n-menu-box-shadow);\n"),$={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},R=y($),A=l({name:"PopselectPanel",props:$,setup(e){const s=i(x),{mergedClsPrefixRef:t,inlineThemeDisabled:n}=u(e),r=c("Popselect","-pop-select",T,d,s.props,t),a=p((()=>S(e.options,o("value","children"))));function l(s,o){const{onUpdateValue:t,"onUpdate:value":n,onChange:r}=e;t&&b(t,s,o),n&&b(n,s,o),r&&b(r,s,o)}h(m(e,"options"),(()=>{v((()=>{s.syncPosition()}))}));const f=p((()=>{const{self:{menuBoxShadow:e}}=r.value;return{"--n-menu-box-shadow":e}})),y=n?g("select",void 0,f,s.props):void 0;return{mergedTheme:s.mergedThemeRef,mergedClsPrefix:t,treeMate:a,handleToggle:function(o){!function(o){const{value:{getNode:t}}=a;if(e.multiple)if(Array.isArray(e.value)){const s=[],n=[];let r=!0;e.value.forEach((e=>{if(e===o)return void(r=!1);const a=t(e);a&&(s.push(a.key),n.push(a.rawNode))})),r&&(s.push(o),n.push(t(o).rawNode)),l(s,n)}else{const e=t(o);e&&l([o],[e.rawNode])}else if(e.value===o&&e.cancelable)l(null,null);else{const e=t(o);e&&l(o,e.rawNode);const{"onUpdate:show":n,onUpdateShow:r}=s.props;n&&b(n,!1),r&&b(r,!1),s.setShow(!1)}v((()=>{s.syncPosition()}))}(o.key)},handleMenuMousedown:function(e){j(e,"action")||j(e,"empty")||j(e,"header")||e.preventDefault()},cssVars:n?void 0:f,themeClass:null==y?void 0:y.themeClass,onRender:null==y?void 0:y.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),f(t,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var e,s;return(null===(s=(e=this.$slots).header)||void 0===s?void 0:s.call(e))||[]},action:()=>{var e,s;return(null===(s=(e=this.$slots).action)||void 0===s?void 0:s.call(e))||[]},empty:()=>{var e,s;return(null===(s=(e=this.$slots).empty)||void 0===s?void 0:s.call(e))||[]}})}}),k=l({name:"Popselect",props:Object.assign(Object.assign(Object.assign(Object.assign({},c.props),O(s,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},s.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),$),inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:s}=u(e),o=c("Popselect","-popselect",void 0,d,e,s),t=w(null);function n(){var e;null===(e=t.value)||void 0===e||e.syncPosition()}function r(e){var s;null===(s=t.value)||void 0===s||s.setShow(e)}P(x,{props:e,mergedThemeRef:o,syncPosition:n,setShow:r});const a={syncPosition:n,setShow:r};return Object.assign(Object.assign({},a),{popoverInstRef:t,mergedTheme:o})},render(){const{mergedTheme:s}=this,o={theme:s.peers.Popover,themeOverrides:s.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(e,s,o,t,r)=>{const{$attrs:a}=this;return f(A,Object.assign({},a,{class:[a.class,e],style:[a.style,...o]},M(this.$props,R),{ref:C(s),onMouseenter:n([t,a.onMouseenter]),onMouseleave:n([r,a.onMouseleave])}),{header:()=>{var e,s;return null===(s=(e=this.$slots).header)||void 0===s?void 0:s.call(e)},action:()=>{var e,s;return null===(s=(e=this.$slots).action)||void 0===s?void 0:s.call(e)},empty:()=>{var e,s;return null===(s=(e=this.$slots).empty)||void 0===s?void 0:s.call(e)}})}};return f(e,Object.assign({},O(this.$props,R),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var e,s;return null===(s=(e=this.$slots).default)||void 0===s?void 0:s.call(e)}})}});export{k as _};
