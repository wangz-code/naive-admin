import{d as e,bn as t,bp as s,k as a,u as o,l as i,c as l,w as r,e as n,L as d,bm as p,o as u,b as c,h as m,j as f,bo as y,p as g,q as _,aB as x,H as T,B as b}from"./index-Dtj_mDDm.js";import{_ as v,a as h}from"./CurrentPermissionMode.vuevuetypescriptsetuptruelang-776TYzaX.js";import{_ as k}from"./Authority.vuevuetypescriptsetuptruelang-e9Mo-Kz5.js";import{N as B}from"./Divider-BbgCjIMh.js";import{_ as P}from"./Space-D7RqsitB.js";import"./get-slot-BjAOOWF7.js";const j=e({__name:"ButtonPermission",setup(e){const{hasPermission:j,isBackendPermissionMode:C}=t(),M=s(),w=a(),{t:A}=o(),D=i((()=>w.getRoleList.includes(y.ADMIN))),N=i((()=>w.getRoleList.includes(y.USER)));function R(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;w.setToken(t),yield w.getUserInfoAction(),yield M.changePermissionCode()},new Promise(((e,o)=>{var i=e=>{try{r(a.next(e))}catch(t){o(t)}},l=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,l);r((a=a.apply(t,s)).next())}));var t,s,a}return(e,t)=>{const s=d,a=B,o=h,i=b,w=P,S=p("auth");return u(),l(s,{title:n(A)("page.permission.pageTitles.button")},{default:r((()=>[c(v),c(s,{class:"my-4",title:n(A)("page.permission.currentCode"),embedded:"",bordered:!1},{default:r((()=>[m(f(n(M).getPermissionCodes),1)])),_:1},8,["title"]),c(a),c(o,{class:"mt-4",type:"info",title:n(A)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),c(a),c(s,{class:"mt-4",title:n(A)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:r((()=>[c(w,null,{default:r((()=>[c(i,{type:n(D)?"primary":"default",disabled:!n(C),onClick:t[0]||(t[0]=e=>R(n(y).ADMIN))},{default:r((()=>[m(f(n(y).ADMIN),1)])),_:1},8,["type","disabled"]),c(i,{type:n(N)?"primary":"default",disabled:!n(C),onClick:t[1]||(t[1]=e=>R(n(y).USER))},{default:r((()=>[m(f(n(y).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),n(C)?(u(),g(T,{key:0},[c(a,null,{default:r((()=>[m(f(n(A)("page.permission.componentWayTitle")),1)])),_:1}),c(k,{value:"1000"},{default:r((()=>[c(i,{type:"primary",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),c(k,{value:"2000"},{default:r((()=>[c(i,{type:"success",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),c(k,{value:["1000","2000"]},{default:r((()=>[c(i,{type:"error",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),c(a,null,{default:r((()=>[m(f(n(A)("page.permission.functionWayTitle")),1)])),_:1}),n(j)("1000")?(u(),l(i,{key:0,type:"primary",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):_("",!0),n(j)("2000")?(u(),l(i,{key:1,type:"success",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):_("",!0),n(j)(["1000","2000"])?(u(),l(i,{key:2,type:"error",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):_("",!0),c(a,null,{default:r((()=>[m(f(n(A)("page.permission.directiveWayTitle")),1)])),_:1}),x((u(),l(i,{type:"primary",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[S,"1000"]]),x((u(),l(i,{type:"success",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[S,"2000"]]),x((u(),l(i,{type:"error",class:"mx-4"},{default:r((()=>[m(f(n(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[S,["1000","2000"]]])],64)):_("",!0)])),_:1},8,["title"])}}});export{j as default};
