import{d as e,u as a,a as l,r as t,o,p as s,b as n,w as u,e as r,H as p,q as i,h as d,v as c,B as m,_ as f,L as h}from"./index-igetQ514.js";import{i as _,t as v,d as g,S as b,C as j,b as y,g as k,_ as w,c as x,a as S,e as U,f as P,A as z,h as C,T as D}from"./numberUtils-B1sdvYMr.js";import{u as V}from"./use-message-D_gUYCBg.js";import{r as R}from"./utils-Des3bf1i.js";import{N as L}from"./Input-BaiNfrn6.js";import{N as T,a as F}from"./FormItem-8GC8-7jk.js";import{_ as I,b as N}from"./Grid-DQvEHrGX.js";import{_ as A}from"./DatePicker-I6d51wPe.js";import{_ as E}from"./Select-D_JyGJGf.js";import{_ as G}from"./Dropdown-XviYS72R.js";import{_ as q}from"./Space-Bm2dH6xY.js";import{_ as H}from"./DataTable-BrdDMVaf.js";import"./get-slot-BjAOOWF7.js";import"./isNil-aV-w2MPu.js";import"./use-locale-DU65S_mc.js";import"./use-merged-state-DBHnG9yW.js";import"./next-frame-once-DiJwGkuW.js";import"./FocusDetector-44jhgDWi.js";import"./Popover-DBcoWgxD.js";import"./use-compitable-Dydh10IY.js";import"./Forward-S95Hqz2E.js";import"./create-Bylz8BGN.js";import"./Tag-C7IOvWmi.js";import"./index-CZ3Fyu1n.js";import"./Checkmark-CR2Vl_GF.js";import"./Empty-BLvPbj0r.js";import"./Checkbox-C-VptM1-.js";import"./RadioGroup-B5UoDU3A.js";import"./Tooltip-DXV-JLhh.js";import"./Pagination-DuNHC1De.js";const B=()=>_([["billdate","单据日期"],["name","姓名"],["phone","联系电话"],["address","地址"],["state","单据状态"],["sales","销售金额","right",v("sales")],["payment","收款金额","right",v("payment")],["action","操作","center"]]),K=e({__name:"index",setup(e){a();const _=V(),v=l(null),K=l(!0),M=l({user:{name:"",age:""},where:"",phone:"",select:"",saleValue:"",stateValue:"",dateRange:[Date.now(),Date.now()]});l();const O=[{label:"批量发起",key:"submit",icon:R(U)},{label:"批量审核",key:"audit",icon:R(P)},{label:"批量驳回",key:"reject",icon:R(z)},{label:"批量反审",key:"reAudit",icon:R(C)},{label:"批量删除",key:"delete",icon:R(D)}],Q=["","全部收款","部分收款","未收款"].map((e=>({label:e||"全部",value:e}))),W=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e}))),X=e=>{_.success(e)},Y=e=>{var a;e.preventDefault(),null==(a=v.value)||a.validate((e=>{e?(console.log(e),_.error("Invalid")):Z()}))},Z=()=>{return e=this,a=null,l=function*(){try{J.isLoading=!0;const{data:e}=yield k();console.log("data log==>",e),"success"==e.status&&(J.source=e.data)}catch(e){}finally{J.isLoading=!1}},new Promise(((t,o)=>{var s=e=>{try{u(l.next(e))}catch(a){o(a)}},n=e=>{try{u(l.throw(e))}catch(a){o(a)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,n);u((l=l.apply(e,a)).next())}));var e,a,l},$=t({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,100],prefix:({itemCount:e})=>`${e}条记录`,onChange:e=>{$.page=e},onUpdatePageSize:e=>{$.pageSize=e,$.page=1}}),J=t({source:[],isLoading:!1,summary:e=>({name:{value:c("span",{style:{color:"red"}},e.reduce(((e,a)=>e),0)),colSpan:3}})});return Z(),(e,a)=>{const l=L,t=T,c=I,_=A,k=E,U=N,P=w,z=m,C=G,D=q,V=f,R=x,Z=S,ee=F,ae=H,le=h;return o(),s("div",null,[n(le,null,{default:u((()=>[n(ee,{ref_key:"formRef",ref:v,"label-placement":"left","label-width":"auto",model:r(M)},{default:u((()=>[n(U,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:u((()=>[n(c,null,{default:u((()=>[n(t,{label:"模糊查询",path:"where","show-feedback":!1},{default:u((()=>[n(l,{value:r(M).where,"onUpdate:value":a[0]||(a[0]=e=>r(M).where=e),placeholder:"输入关键字"},null,8,["value"])])),_:1})])),_:1}),n(c,null,{default:u((()=>[n(t,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:u((()=>[n(l,{value:r(M).user.name,"onUpdate:value":a[1]||(a[1]=e=>r(M).user.name=e),placeholder:"输入姓名"},null,8,["value"])])),_:1})])),_:1}),n(c,{span:2},{default:u((()=>[n(t,{label:"单据日期","show-feedback":!1,path:"phone"},{default:u((()=>[n(_,{value:r(M).dateRange,"onUpdate:value":a[2]||(a[2]=e=>r(M).dateRange=e),type:"daterange",clearable:""},null,8,["value"])])),_:1})])),_:1}),n(c,null,{default:u((()=>[n(t,{label:"收款状态","show-feedback":!1,path:"phone"},{default:u((()=>[n(k,{value:r(M).saleValue,"onUpdate:value":a[3]||(a[3]=e=>r(M).saleValue=e),placeholder:"Select",options:r(Q)},null,8,["value","options"])])),_:1})])),_:1}),n(c,null,{default:u((()=>[n(t,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:u((()=>[n(k,{value:r(M).stateValue,"onUpdate:value":a[4]||(a[4]=e=>r(M).stateValue=e),placeholder:"Select",options:r(W)},null,8,["value","options"])])),_:1})])),_:1}),r(K)?(o(),s(p,{key:0},[n(c,null,{default:u((()=>[n(t,{label:"电话号码",path:"phone","show-feedback":!1},{default:u((()=>[n(l,{value:r(M).phone,"onUpdate:value":a[5]||(a[5]=e=>r(M).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),n(c,null,{default:u((()=>[n(t,{label:"电话号码",path:"phone","show-feedback":!1},{default:u((()=>[n(l,{value:r(M).phone,"onUpdate:value":a[6]||(a[6]=e=>r(M).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),n(c,null,{default:u((()=>[n(t,{label:"电话号码",path:"phone","show-feedback":!1},{default:u((()=>[n(l,{value:r(M).phone,"onUpdate:value":a[7]||(a[7]=e=>r(M).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1})],64)):i("",!0)])),_:1}),n(Z,{class:"m-t-sm m-b-sm",justify:"space-between"},{default:u((()=>[n(D,null,{default:u((()=>[n(P,{type:"primary",icon:r(g)},{default:u((()=>a[9]||(a[9]=[d("新增")]))),_:1},8,["icon"]),n(z,{strong:"",secondary:""},{default:u((()=>a[10]||(a[10]=[d("下载模板")]))),_:1}),n(z,{strong:"",secondary:""},{default:u((()=>a[11]||(a[11]=[d("批量导入")]))),_:1}),n(z,{strong:"",secondary:""},{default:u((()=>a[12]||(a[12]=[d("导出Excel")]))),_:1}),n(z,{strong:"",secondary:""},{default:u((()=>a[13]||(a[13]=[d("打印")]))),_:1}),n(C,{trigger:"hover",options:O,onSelect:X},{default:u((()=>[n(z,null,{default:u((()=>a[14]||(a[14]=[d("更多...")]))),_:1})])),_:1})])),_:1}),n(D,null,{default:u((()=>[n(R,null,{default:u((()=>[n(P,{"attr-type":"button",onClick:Y,type:"info",icon:r(b)},null,8,["icon"]),n(z,{"attr-type":"reset"},{default:u((()=>a[15]||(a[15]=[d(" 重置 ")]))),_:1}),n(z,{"attr-type":"button",onClick:a[8]||(a[8]=e=>K.value=!r(K))},{icon:u((()=>[n(V,{component:r(K)?r(j):r(y),size:16},null,8,["component"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),n(ae,{columns:r(B)(),data:r(J).source,pagination:r($),loading:r(J).isLoading},null,8,["columns","data","pagination","loading"])])),_:1})])}}});export{K as default};
