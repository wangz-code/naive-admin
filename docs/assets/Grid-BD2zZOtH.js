import{bN as e,c$ as t,l as s,a as r,aF as i,an as o,d as a,i as l,aV as n,v as p,aH as d,ad as u,D as f,aZ as v,a2 as c,at as h,as as m,c1 as S,ab as y,a$ as g,b3 as b,bP as w}from"./index-CTEhN0jU.js";import{b as $}from"./next-frame-once-DiJwGkuW.js";import{g as x}from"./get-slot-BjAOOWF7.js";function R(e,t){var s;if(null==e)return;const r=function(e){if("number"==typeof e)return{"":e.toString()};const t={};return e.split(/ +/).forEach((e=>{if(""===e)return;const[s,r]=e.split(":");void 0===r?t[""]=s:t[s]=r})),t}(e);if(void 0===t)return r[""];if("string"==typeof t)return null!==(s=r[t])&&void 0!==s?s:r[""];if(Array.isArray(t)){for(let e=t.length-1;e>=0;--e){const s=t[e];if(s in r)return r[s]}return r[""]}{let e,s=-1;return Object.keys(r).forEach((i=>{const o=Number(i);!Number.isNaN(o)&&t>=o&&o>=s&&(s=o,e=r[i])})),e}}const G={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};const N={};const C=o("n-grid"),E=1,_={span:{type:[Number,String],default:E},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},D=d(_),O=a({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:_,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:r,overflowRef:i,layoutShiftDisabledRef:o}=l(C),a=u();return{overflow:i,itemStyle:r,layoutShiftDisabled:o,mergedXGap:s((()=>n(t.value||0))),deriveStyle:()=>{e.value;const{privateSpan:s=E,privateShow:r=!0,privateColStart:i,privateOffset:o=0}=a.vnode.props,{value:l}=t,p=n(l||0);return{display:r?"":"none",gridColumn:`${null!=i?i:`span ${s}`} / span ${s}`,marginLeft:o?`calc((100% - (${s} - 1) * ${p}) / ${s} * ${o} + ${p} * ${o})`:""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:e,offset:t,mergedXGap:s}=this;return p("div",{style:{gridColumn:`span ${e} / span ${e}`,marginLeft:t?`calc((100% - (${e} - 1) * ${s}) / ${e} * ${t} + ${s} * ${t})`:""}},this.$slots)}return p("div",{style:[this.itemStyle,this.deriveStyle()]},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{overflow:this.overflow}))}}),B={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},j="__ssr__",L=a({name:"Grid",inheritAttrs:!1,props:{layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:24},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},setup(e){const{mergedClsPrefixRef:o,mergedBreakpointsRef:a}=f(e),l=/^\d+$/,p=r(void 0),d=function(e=G){if(!t)return s((()=>[]));if("function"!=typeof window.matchMedia)return s((()=>[]));const o=r({}),a=Object.keys(e),l=(e,t)=>{e.matches?o.value[t]=!0:o.value[t]=!1};return a.forEach((t=>{const s=e[t];let r,i;void 0===N[s]?(r=window.matchMedia(`(min-width: ${s}px)`),r.addEventListener?r.addEventListener("change",(e=>{i.forEach((s=>{s(e,t)}))})):r.addListener&&r.addListener((e=>{i.forEach((s=>{s(e,t)}))})),i=new Set,N[s]={mql:r,cbs:i}):(r=N[s].mql,i=N[s].cbs),i.add(l),r.matches&&i.forEach((e=>{e(r,t)}))})),i((()=>{a.forEach((t=>{const{cbs:s}=N[e[t]];s.has(l)&&s.delete(l)}))})),s((()=>{const{value:e}=o;return a.filter((t=>e[t]))}))}((null==a?void 0:a.value)||B),u=v((()=>!!e.itemResponsive||(!l.test(e.cols.toString())||(!l.test(e.xGap.toString())||!l.test(e.yGap.toString()))))),y=s((()=>{if(u.value)return"self"===e.responsive?p.value:d.value})),g=v((()=>{var t;return null!==(t=Number(R(e.cols.toString(),y.value)))&&void 0!==t?t:24})),b=v((()=>R(e.xGap.toString(),y.value))),w=v((()=>R(e.yGap.toString(),y.value))),x=e=>{p.value=e.contentRect.width},E=e=>{$(x,e)},_=r(!1),D=s((()=>{if("self"===e.responsive)return E})),O=r(!1),L=r();return c((()=>{const{value:e}=L;e&&e.hasAttribute(j)&&(e.removeAttribute(j),O.value=!0)})),h(C,{layoutShiftDisabledRef:m(e,"layoutShiftDisabled"),isSsrRef:O,itemStyleRef:m(e,"itemStyle"),xGapRef:b,overflowRef:_}),{isSsr:!S,contentEl:L,mergedClsPrefix:o,style:s((()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:n(e.xGap),rowGap:n(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${g.value}, minmax(0, 1fr))`,columnGap:n(b.value),rowGap:n(w.value)})),isResponsive:u,responsiveQuery:y,responsiveCols:g,handleResize:D,overflow:_}},render(){if(this.layoutShiftDisabled)return p("div",y({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const t=()=>{var t,s,r,i,o,a,l;this.overflow=!1;const n=b(x(this)),d=[],{collapsed:u,collapsedRows:f,responsiveCols:v,responsiveQuery:c}=this;n.forEach((t=>{var s,r,i,o,a;if(!0!==(null===(s=null==t?void 0:t.type)||void 0===s?void 0:s.__GRID_ITEM__))return;if(function(t){var s;const r=null===(s=t.dirs)||void 0===s?void 0:s.find((({dir:t})=>t===e));return!(!r||!1!==r.value)}(t)){const e=w(t);return e.props?e.props.privateShow=!1:e.props={privateShow:!1},void d.push({child:e,rawChildSpan:0})}t.dirs=(null===(r=t.dirs)||void 0===r?void 0:r.filter((({dir:t})=>t!==e)))||null,0===(null===(i=t.dirs)||void 0===i?void 0:i.length)&&(t.dirs=null);const l=w(t),n=Number(null!==(a=R(null===(o=l.props)||void 0===o?void 0:o.span,c))&&void 0!==a?a:1);0!==n&&d.push({child:l,rawChildSpan:n})}));let h=0;const m=null===(t=d[d.length-1])||void 0===t?void 0:t.child;if(null==m?void 0:m.props){const e=null===(s=m.props)||void 0===s?void 0:s.suffix;void 0!==e&&!1!==e&&(h=Number(null!==(i=R(null===(r=m.props)||void 0===r?void 0:r.span,c))&&void 0!==i?i:1),m.props.privateSpan=h,m.props.privateColStart=v+1-h,m.props.privateShow=null===(o=m.props.privateShow)||void 0===o||o)}let S=0,g=!1;for(const{child:e,rawChildSpan:p}of d){if(g&&(this.overflow=!0),!g){const t=Number(null!==(l=R(null===(a=e.props)||void 0===a?void 0:a.offset,c))&&void 0!==l?l:0),s=Math.min(p+t,v);if(e.props?(e.props.privateSpan=s,e.props.privateOffset=t):e.props={privateSpan:s,privateOffset:t},u){const e=S%v;s+e>v&&(S+=v-e),s+S+h>f*v?g=!0:S+=s}}g&&(e.props?!0!==e.props.privateShow&&(e.props.privateShow=!1):e.props={privateShow:!1})}return p("div",y({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[j]:this.isSsr||void 0},this.$attrs),d.map((({child:e})=>e)))};return this.isResponsive&&"self"===this.responsive?p(g,{onResize:this.handleResize},{default:t}):t()}});export{O as _,L as a,_ as b,D as g};
