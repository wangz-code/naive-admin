import{s as e,a,b as l,t,e as o,B as s,y as r,g as n,C as i,_ as u,c as p,S as d,d as f,A as m,f as c,T as h}from"./numberUtils-DyTWkMrl.js";import{v as y,d as b,a as v,i as _,o as g,c as k,w as j,b as w,e as U,f as C,h as R,B as x,L as z}from"./index-DARFfA1y.js";import{u as K}from"./use-message-Ddh_dhS_.js";import{r as S}from"./utils-BZVVZZGm.js";import{N as V}from"./Input-5cQz8LEN.js";import{N as D,a as F}from"./FormItem-DnyVGc6W.js";import{_ as N,a as P}from"./Grid-C2fGGNj7.js";import{_ as T}from"./DatePicker-mwUNVdJO.js";import{_ as A}from"./Select-CUhFOAkZ.js";import{_ as B}from"./Dropdown-B8FInGfZ.js";import{_ as I}from"./Space-BTRDy1N4.js";import"./Flex-Cp6RI_TJ.js";import"./get-slot-BjAOOWF7.js";import"./DataTable-o1G3C4xw.js";import"./Checkbox-C3Rui2Ue.js";import"./use-merged-state-CFBUsh0b.js";import"./RadioGroup-BEN_67mz.js";import"./Popover-CFfzrRBi.js";import"./use-compitable-DuvaDNS_.js";import"./next-frame-once-DiJwGkuW.js";import"./FocusDetector-BQzXbw3B.js";import"./create-Bylz8BGN.js";import"./Tooltip-BgLXfIKX.js";import"./Empty-B21olQ5Q.js";import"./use-locale-DwupoVXT.js";import"./Pagination-DohxwXgL.js";import"./Forward-BjUGNbi1.js";import"./Popselect-CKtzXi14.js";import"./Tag-fbafY23M.js";import"./isNil-aV-w2MPu.js";import"./index-nOp0nN3m.js";import"./Checkmark-BkBgpDzS.js";const $=o=>{const s=[];for(let e=0;e<50;e++)s.push({title:"单据日期"+e,key:"billdate"+e,width:100});return[{type:"selection",fixed:"left"},{title:"单据日期",key:"billdate",sorter:e("billdate"),width:100},{title:"姓名",key:"name",sorter:a("name"),width:100},{title:"联系电话",key:"phone",ellipsis:{tooltip:!0},width:120},{title:"销售金额",key:"sales",width:150,align:"right",sorter:l("sales"),render:t("sales")},{title:"收款金额",width:100,key:"payment",align:"right",sorter:l("payment"),render:t("payment")},{title:"地址",key:"address",width:160},{title:"单据状态",key:"state",width:100},...s,{title:"操作",key:"action",fixed:"right",align:"center",width:80,render:o}]},q=(e,a)=>y("span",{},o(e.reduce(((e,l)=>e+Number(l[a])),0))),G=e=>((e,a)=>{const l={};for(const t of a)l[t]={value:q(e,t)};return l})(e,["sales","payment"]),J=b({__name:"index",setup(e){const a=K(),l=v(null),{tableRef:t,getKeys:o,getRows:b,getSource:q,setRows:J,setKeys:L}=s(),O={params:{fuzzy:"",filter:{name:"",state:null,saleValue:null,where:"",phone:"",select:"",stateValue:"",dateRange:null}},watchFilter:!0,rowKey:"id"},Q=_("n-config-provider");console.log("res log==>",Q);const E=()=>y(x,{size:"small",onClick:()=>{a.info("action")}},(()=>"操作")),M=[{label:"批量发起",key:"submit",icon:S(d)},{label:"批量审核",key:"audit",icon:S(f)},{label:"批量驳回",key:"reject",icon:S(m)},{label:"批量反审",key:"reAudit",icon:S(c)},{label:"批量删除",key:"delete",icon:S(h)}],W=[["0","全部收款"],["1","部分收款"],["9","未收款"]].map((e=>({label:e[1],value:e[0]}))),X=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e}))),Z=e=>{const l=e();a.info(l.length?JSON.stringify(l):"空数据")};return(e,a)=>{const s=V,d=u,f=D,m=N,c=T,h=A,y=P,v=F,_=p,K=B,S=I,Q=z;return g(),k(Q,null,{default:j((()=>[w(U(r),{ref_key:"tableRef",ref:t,columns:U($)(E),summary:U(G),api:U(n),config:O},{form:j((({collapsed:a,reload:t,qParams:o})=>[w(v,{ref_key:"formRef",ref:l,"label-placement":"left","label-width":"auto",model:o},{default:j((()=>[w(y,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",collapsed:a,"collapsed-rows":1,responsive:"screen"},{default:j((()=>[w(d,{label:e.$t("common.likeQuery"),path:"fuzzy","show-feedback":!1},{default:j((()=>[w(s,{value:o.fuzzy,"onUpdate:value":e=>o.fuzzy=e,placeholder:e.$t("common.input"),clearable:"",onKeyup:C(t,["enter"]),onClear:t},null,8,["value","onUpdate:value","placeholder","onKeyup","onClear"])])),_:2},1032,["label"]),w(m,null,{default:j((()=>[w(f,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:j((()=>[w(s,{value:o.filter.name,"onUpdate:value":e=>o.filter.name=e,placeholder:"输入姓名"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),w(m,{span:2},{default:j((()=>[w(f,{label:"单据日期","show-feedback":!1,path:"phone"},{default:j((()=>[w(c,{value:o.filter.dateRange,"onUpdate:value":e=>o.filter.dateRange=e,type:"daterange",clearable:""},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),w(m,null,{default:j((()=>[w(f,{label:"收款状态","show-feedback":!1,path:"phone"},{default:j((()=>[w(h,{value:o.filter.saleValue,"onUpdate:value":e=>o.filter.saleValue=e,clearable:"",options:U(W)},null,8,["value","onUpdate:value","options"])])),_:2},1024)])),_:2},1024),w(m,null,{default:j((()=>[w(f,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:j((()=>[w(h,{value:o.filter.stateValue,"onUpdate:value":e=>o.filter.stateValue=e,placeholder:"Select",options:U(X)},null,8,["value","onUpdate:value","options"])])),_:2},1024)])),_:2},1024),w(m,null,{default:j((()=>[w(f,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[w(s,{value:o.filter.phone,"onUpdate:value":e=>o.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),w(m,null,{default:j((()=>[w(f,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[w(s,{value:o.filter.phone,"onUpdate:value":e=>o.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),w(m,null,{default:j((()=>[w(f,{label:"电话号码",path:"phone","show-feedback":!1},{default:j((()=>[w(s,{value:o.filter.phone,"onUpdate:value":e=>o.filter.phone=e,placeholder:"电话号码"},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["collapsed"])])),_:2},1032,["model"])])),"bar-left":j((()=>[w(S,null,{default:j((()=>[w(_,{type:"primary",icon:U(i)},{default:j((()=>a[5]||(a[5]=[R("新增")]))),_:1},8,["icon"]),w(U(x),{strong:"",secondary:"",onClick:a[0]||(a[0]=e=>Z(U(o)))},{default:j((()=>a[6]||(a[6]=[R("获取选中Keys")]))),_:1}),w(U(x),{strong:"",secondary:"",onClick:a[1]||(a[1]=e=>Z(U(b)))},{default:j((()=>a[7]||(a[7]=[R("获取选中Rows")]))),_:1}),w(U(x),{strong:"",secondary:"",onClick:a[2]||(a[2]=e=>Z(U(q)))},{default:j((()=>a[8]||(a[8]=[R("获取当页数据")]))),_:1}),w(U(x),{strong:"",secondary:"",onClick:a[3]||(a[3]=e=>U(L)([0,1,2]))},{default:j((()=>a[9]||(a[9]=[R("设置选中Keys")]))),_:1}),w(U(x),{strong:"",secondary:"",onClick:a[4]||(a[4]=e=>U(J)([{id:3},{id:4},{id:5}]))},{default:j((()=>a[10]||(a[10]=[R("设置选中Rows")]))),_:1}),w(K,{trigger:"hover",options:M},{default:j((()=>[w(U(x),null,{default:j((()=>a[11]||(a[11]=[R("更多...")]))),_:1})])),_:1})])),_:1})])),_:1},8,["columns","summary","api"])])),_:1})}}});export{J as default};
