import{d as e,bA as t,bC as s,k as a,u as o,l as i,c as r,w as l,e as n,L as d,bz as p,o as u,b as c,h as m,j as f,bB as y,p as g,q as _,av as x,H as T,B as b}from"./index-DMvMf093.js";import{_ as v}from"./CurrentPermissionMode.vuevuetypescriptsetuptruelang-CqWi3RTO.js";import{_ as h}from"./Authority.vuevuetypescriptsetuptruelang-Clb0Ctlv.js";import{N as k}from"./Divider-DYOVh1IP.js";import{_ as B}from"./Alert-CyqYwvtu.js";import{_ as P}from"./Space-l8HuO4CC.js";import"./get-slot-BjAOOWF7.js";const j=e({__name:"ButtonPermission",setup(e){const{hasPermission:j,isBackendPermissionMode:C}=t(),A=s(),M=a(),{t:w}=o(),R=i((()=>M.getRoleList.includes(y.ADMIN))),S=i((()=>M.getRoleList.includes(y.USER)));function D(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;M.setToken(t),yield M.getUserInfoAction(),yield A.changePermissionCode()},new Promise(((e,o)=>{var i=e=>{try{l(a.next(e))}catch(t){o(t)}},r=e=>{try{l(a.throw(e))}catch(t){o(t)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,r);l((a=a.apply(t,s)).next())}));var t,s,a}return(e,t)=>{const s=d,a=k,o=B,i=b,M=P,E=p("auth");return u(),r(s,{title:n(w)("page.permission.pageTitles.button")},{default:l((()=>[c(v),c(s,{class:"my-4",title:n(w)("page.permission.currentCode"),embedded:"",bordered:!1},{default:l((()=>[m(f(n(A).getPermissionCodes),1)])),_:1},8,["title"]),c(a),c(o,{class:"mt-4",type:"info",title:n(w)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),c(a),c(s,{class:"mt-4",title:n(w)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:l((()=>[c(M,null,{default:l((()=>[c(i,{type:n(R)?"primary":"default",disabled:!n(C),onClick:t[0]||(t[0]=e=>D(n(y).ADMIN))},{default:l((()=>[m(f(n(y).ADMIN),1)])),_:1},8,["type","disabled"]),c(i,{type:n(S)?"primary":"default",disabled:!n(C),onClick:t[1]||(t[1]=e=>D(n(y).USER))},{default:l((()=>[m(f(n(y).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),n(C)?(u(),g(T,{key:0},[c(a,null,{default:l((()=>[m(f(n(w)("page.permission.componentWayTitle")),1)])),_:1}),c(h,{value:"1000"},{default:l((()=>[c(i,{type:"primary",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),c(h,{value:"2000"},{default:l((()=>[c(i,{type:"success",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),c(h,{value:["1000","2000"]},{default:l((()=>[c(i,{type:"error",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),c(a,null,{default:l((()=>[m(f(n(w)("page.permission.functionWayTitle")),1)])),_:1}),n(j)("1000")?(u(),r(i,{key:0,type:"primary",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):_("",!0),n(j)("2000")?(u(),r(i,{key:1,type:"success",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):_("",!0),n(j)(["1000","2000"])?(u(),r(i,{key:2,type:"error",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):_("",!0),c(a,null,{default:l((()=>[m(f(n(w)("page.permission.directiveWayTitle")),1)])),_:1}),x((u(),r(i,{type:"primary",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[E,"1000"]]),x((u(),r(i,{type:"success",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[E,"2000"]]),x((u(),r(i,{type:"error",class:"mx-4"},{default:l((()=>[m(f(n(w)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[E,["1000","2000"]]])],64)):_("",!0)])),_:1},8,["title"])}}});export{j as default};
