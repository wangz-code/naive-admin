import{d as e,o as a,n as t,i as l,a1 as o,e as n,w as s,f as r,g as u,a as i,c as p,r as d,G as c,p as m,j as h,B as f,s as g,_ as v,K as _}from"./index-MskScSmw.js";import{i as w,t as b,c as j,C as y,S as k,a as x,b as S,g as C,d as U,_ as M,e as R,f as z,A as D,h as P,T as V}from"./numberUtils-C-zP-vzZ.js";import{_ as L}from"./Space-EbjOeIIa.js";import{R as E}from"./Refresh-54kR1j8Y.js";import{r as F}from"./utils-vrNZCFiu.js";import{N as G}from"./Input-bltcwLPj.js";import{N,a as T}from"./FormItem-IQ4DDPLO.js";import{_ as A,a as B}from"./Grid-bvLyWBS-.js";import{_ as I}from"./DatePicker-CE4FjRvW.js";import{_ as H}from"./Select-BYUVuy73.js";import{_ as $}from"./Dropdown-kCZC9-l_.js";import{_ as q}from"./DataTable-CrZsBU8S.js";import"./get-slot-BjAOOWF7.js";import"./isNil-aV-w2MPu.js";import"./use-locale-fKxi8R3k.js";import"./use-merged-state-D6Ro81xW.js";import"./next-frame-once-DiJwGkuW.js";import"./FocusDetector-CLEbZ6jW.js";import"./Popover-BNbX0A4O.js";import"./use-compitable-CLINQHNu.js";import"./Forward-K3xed2aW.js";import"./create-Bylz8BGN.js";import"./Tag-Bv2HMJzN.js";import"./index-GPkPTh6S.js";import"./Checkmark-BUtaY40P.js";import"./Empty-Bur4HmRM.js";import"./Checkbox-BM8Hqcg9.js";import"./RadioGroup-D6DUe4Vx.js";import"./Tooltip-6lPvuKel.js";import"./Pagination-CMXIG4o_.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},K=[l("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M12 15l8.385-8.415a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3z"}),l("path",{d:"M16 5l3 3"}),l("path",{d:"M9 7.07A7.002 7.002 0 0 0 10 21a7.002 7.002 0 0 0 6.929-5.999"})],-1)],O=e({name:"EditCircle",render:function(e,l){return a(),t("svg",J,K)}}),Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},W=[o('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 5H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5.697"></path><path d="M18 12V7a2 2 0 0 0-2-2h-2"></path><rect x="8" y="3" width="6" height="4" rx="2"></rect><path d="M8 11h4"></path><path d="M8 15h3"></path><circle cx="16.5" cy="17.5" r="2.5"></circle><path d="M18.5 19.5L21 22"></path></g>',1)],X=e({name:"ReportSearch",render:function(e,l){return a(),t("svg",Q,W)}}),Y=e=>[{type:"selection"},...w([["billdate","单据日期"],["name","姓名"],["phone","联系电话"],["address","地址"],["state","单据状态"],["sales","销售金额","right",b("sales")],["payment","收款金额","right",b("payment")],["action","操作","center",e.action]])],Z=e({__name:"action",setup(e){const t=()=>{};return(e,l)=>{const o=j,i=L;return a(),n(i,{justify:"center"},{default:s((()=>[r(o,{title:"查看",onClick:t,icon:u(X)},null,8,["icon"]),r(o,{title:"编辑",icon:u(O)},null,8,["icon"])])),_:1})}}}),ee=e({__name:"index",setup(e){const l=i(),o=p(null),w=p(!0),b=p({user:{name:"",age:""},where:"",phone:"",select:"",saleValue:"",stateValue:"",dateRange:[Date.now(),Date.now()]});p();const J=[{label:"批量发起",key:"submit",icon:F(R)},{label:"批量审核",key:"audit",icon:F(z)},{label:"批量驳回",key:"reject",icon:F(D)},{label:"批量反审",key:"reAudit",icon:F(P)},{label:"批量删除",key:"delete",icon:F(V)}],K=["","全部收款","部分收款","未收款"].map((e=>({label:e||"全部",value:e}))),O=["","起草","待审","通过"].map((e=>({label:e||"全部",value:e}))),Q=e=>{l.success(e)},W=e=>{var a;e.preventDefault(),null==(a=o.value)||a.validate((e=>{e?(console.log(e),l.error("Invalid")):X()}))},X=()=>{return e=this,a=null,t=function*(){try{te.isLoading=!0;const{data:e}=yield C();"success"==e.status&&(te.source=e.data)}catch(e){}finally{te.isLoading=!1}},new Promise(((l,o)=>{var n=e=>{try{r(t.next(e))}catch(a){o(a)}},s=e=>{try{r(t.throw(e))}catch(a){o(a)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,s);r((t=t.apply(e,a)).next())}));var e,a,t},ee={action:e=>g(Z,{})},ae=d({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,100],prefix:({itemCount:e})=>`${e}条记录`,onChange:e=>{ae.page=e},onUpdatePageSize:e=>{ae.pageSize=e,ae.page=1}}),te=d({source:[],isLoading:!1,summary:e=>({name:{value:g("span",{style:{color:"red"}},e.reduce(((e,a)=>e),0)),colSpan:3}})});return X(),(e,l)=>{const i=G,p=N,d=A,g=I,C=H,R=B,z=j,D=$,P=L,V=v,F=U,X=M,Z=T,le=q,oe=_;return a(),n(oe,null,{default:s((()=>[r(Z,{ref_key:"formRef",ref:o,"label-placement":"left","label-width":"auto",model:u(b)},{default:s((()=>[r(R,{"x-gap":8,"y-gap":15,cols:"2 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:s((()=>[r(d,null,{default:s((()=>[r(p,{label:"模糊查询",path:"where","show-feedback":!1},{default:s((()=>[r(i,{value:u(b).where,"onUpdate:value":l[0]||(l[0]=e=>u(b).where=e),placeholder:"输入关键字"},null,8,["value"])])),_:1})])),_:1}),r(d,null,{default:s((()=>[r(p,{label:"姓名",path:"user.name","show-feedback":!1,rule:[{required:!0,message:"姓名必填"}]},{default:s((()=>[r(i,{value:u(b).user.name,"onUpdate:value":l[1]||(l[1]=e=>u(b).user.name=e),placeholder:"输入姓名"},null,8,["value"])])),_:1})])),_:1}),r(d,{span:2},{default:s((()=>[r(p,{label:"单据日期","show-feedback":!1,path:"phone"},{default:s((()=>[r(g,{value:u(b).dateRange,"onUpdate:value":l[2]||(l[2]=e=>u(b).dateRange=e),type:"daterange",clearable:""},null,8,["value"])])),_:1})])),_:1}),r(d,null,{default:s((()=>[r(p,{label:"收款状态","show-feedback":!1,path:"phone"},{default:s((()=>[r(C,{value:u(b).saleValue,"onUpdate:value":l[3]||(l[3]=e=>u(b).saleValue=e),placeholder:"Select",options:u(K)},null,8,["value","options"])])),_:1})])),_:1}),r(d,null,{default:s((()=>[r(p,{label:"单据状态","show-feedback":!1,path:"user.name"},{default:s((()=>[r(C,{value:u(b).stateValue,"onUpdate:value":l[4]||(l[4]=e=>u(b).stateValue=e),placeholder:"Select",options:u(O)},null,8,["value","options"])])),_:1})])),_:1}),u(w)?(a(),t(c,{key:0},[r(d,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(b).phone,"onUpdate:value":l[5]||(l[5]=e=>u(b).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),r(d,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(b).phone,"onUpdate:value":l[6]||(l[6]=e=>u(b).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1}),r(d,null,{default:s((()=>[r(p,{label:"电话号码",path:"phone","show-feedback":!1},{default:s((()=>[r(i,{value:u(b).phone,"onUpdate:value":l[7]||(l[7]=e=>u(b).phone=e),placeholder:"电话号码"},null,8,["value"])])),_:1})])),_:1})],64)):m("",!0)])),_:1}),r(X,{class:"m-t-sm m-b-sm",justify:"space-between"},{default:s((()=>[r(P,null,{default:s((()=>[r(z,{type:"primary",icon:u(y)},{default:s((()=>l[9]||(l[9]=[h("新增")]))),_:1},8,["icon"]),r(u(f),{strong:"",secondary:""},{default:s((()=>l[10]||(l[10]=[h("下载模板")]))),_:1}),r(u(f),{strong:"",secondary:""},{default:s((()=>l[11]||(l[11]=[h("批量导入")]))),_:1}),r(u(f),{strong:"",secondary:""},{default:s((()=>l[12]||(l[12]=[h("导出Excel")]))),_:1}),r(u(f),{strong:"",secondary:""},{default:s((()=>l[13]||(l[13]=[h("打印")]))),_:1}),r(D,{trigger:"hover",options:J,onSelect:Q},{default:s((()=>[r(u(f),null,{default:s((()=>l[14]||(l[14]=[h("更多...")]))),_:1})])),_:1})])),_:1}),r(P,null,{default:s((()=>[r(F,null,{default:s((()=>[r(z,{"attr-type":"button",title:"查询",onClick:W,type:"info",icon:u(k)},null,8,["icon"]),r(z,{"attr-type":"reset",title:"重置",icon:u(E)},null,8,["icon"]),r(u(f),{"attr-type":"button",onClick:l[8]||(l[8]=e=>w.value=!u(w))},{icon:s((()=>[r(V,{component:u(w)?u(x):u(S),size:16},null,8,["component"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]),r(le,{columns:u(Y)(ee),data:u(te).source,pagination:u(ae),loading:u(te).isLoading},null,8,["columns","data","pagination","loading"])])),_:1})}}});export{ee as default};
